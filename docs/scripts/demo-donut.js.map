{"version":3,"sources":["webpack:///./demos/demo-donut.js","webpack:///./src/charts/helpers/text.js?db9c","webpack:///./src/charts/helpers/exportChart.js?f69b","webpack:///./src/charts/helpers/serializeWithStyles.js?b833","webpack:///./~/.0.1.0@base-64/base64.js?99c7","webpack:///(webpack)/buildin/module.js?c3c2","webpack:///./~/.1.1.1@d3-shape/build/d3-shape.js?b1db","webpack:///./~/.1.0.5@d3-path/build/d3-path.js?cf70","webpack:///./src/charts/donut.js","webpack:///./src/charts/legend.js","webpack:///./test/fixtures/donutChartDataBuilder.js","webpack:///./test/json/donutDataFivePlusOther.json","webpack:///./test/json/donutDataThreeCategories.json","webpack:///./demos/helpers/colorSelector.js"],"names":["d3Selection","require","PubSub","donut","legend","dataBuilder","colorSelectorHelper","dataset","DonutDataBuilder","withFivePlusOther","build","legendChart","createDonutChart","optionalColorSchema","getLegendChart","donutChart","donutContainer","select","containerWidth","node","getBoundingClientRect","width","on","exportChart","isAnimated","height","externalRadius","internalRadius","data","highlight","id","clearHighlight","colorSchema","datum","call","legendContainer","remove","getInlineLegendChart","horizontal","markerSize","createSmallDonutChart","withThreeCategories","redrawCharts","selectAll","subscribe","createColorSelector","bind","wrapConfig","lineHeight","smallTextOffset","smallTextLineHeightRatio","smallTextRatio","valueClassName","labelClassName","defaultTextSize","defaultFontFace","wrapText","xOffset","fontSize","availableWidth","i","text","words","split","reverse","word","line","lineNumber","smallLineHeight","y","attr","dy","parseFloat","smallFontSize","tspan","append","classed","style","pop","push","join","getComputedTextLength","wrapTextWithEllipses","xpos","limit","each","getTextWidth","fontFace","a","document","createElement","b","getContext","font","measureText","colorSchemas","constants","serializeWithStyles","encoder","window","btoa","encode","b64EncodeUnicode","str","encodeURIComponent","replace","match","p1","String","fromCharCode","config","styleClass","defaultFilename","chartBackground","imageSourceBase","titleFontSize","titleFontFamily","titleTopOffset","styleBackgroundString","d3svg","filename","title","img","createImage","convertSvgToHtml","onload","handleImageLoad","createCanvas","addBackground","html","serializer","initializeSerializer","formatHtmlByBrowser","prependTitle","parseInt","canvas","svgHtml","Image","src","drawImageOnCanvas","image","drawImage","downloadCanvas","extensionType","url","toDataURL","link","href","download","body","appendChild","click","removeChild","navigator","userAgent","search","lineGradientId","e","preventDefault","svgWidth","britechartsGreySchema","margin","left","module","exports","defaultStylesByTagName","noStyleTags","tagNames","forEach","name","computeDefaultStyleByTagName","tagName","defaultStyle","element","computedStyle","getComputedStyle","getDefaultStyleByTagName","toUpperCase","elem","cssTexts","elements","result","nodeType","Node","ELEMENT_NODE","console","error","querySelectorAll","el","cssText","cssPropName","outerHTML","map","d3Dispatch","d3Ease","d3Interpolate","d3Scale","d3Shape","d3Transition","textHelper","colorHelper","top","right","bottom","ease","easeCubicInOut","arcTransitionDuration","pieDrawingTransitionDuration","pieHoverTransitionDuration","radiusHoverOffset","paddingAngle","chartWidth","chartHeight","legendWidth","layout","shape","slices","svg","quantityLabel","nameLabel","percentageLabel","colorScale","britechartsColorSchema","storeAngle","d","_current","reduceOuterRadius","outerRadius","sortComparator","quantity","getQuantity","getSliceFill","dispatcher","dispatch","_selection","_data","cleanData","buildLayout","buildColorScale","buildShape","buildSVG","drawSlices","initTooltip","scaleOrdinal","range","buildContainerGroups","container","pie","padAngle","value","sort","arc","innerRadius","padRadius","percentage","drawLegend","obj","newSlices","enter","handleMouseOver","handleMouseOut","merge","tweenGrowthFactory","transition","duration","attrTween","tweenLoading","tweenArc","cleanLegend","interpolate","t","delay","startAngle","endAngle","_x","arguments","length","apply","d3Format","textSize","textLetterSpacing","markerYOffset","marginRatio","valueReservedSpace","numberLetterSpacing","numberFormat","format","isFadedClassName","getId","getName","getFormattedQuantity","getCircleFill","entries","drawHorizontalLegend","drawVerticalLegend","adjustLines","lineWidth","lineWidthSpace","centerLegendOnSVG","splitInLines","legendGroupSize","emptySpace","cleanFadedLines","horizontalOffset","verticalOffset","labelWidth","getLineElementMargin","exit","fadeLinesBut","exceptionItemId","classToFade","legendEntries","numberOfEntries","size","newLine","lastEntry","filter","entryId","_","jsonFivePlusOther","jsonThreeCategories","Klass","defaults","attributes","extend","withPath","path","jsonURL","colors","selectClass","selectContainerSelector","chartSelector","callback","colorKeys","Object","keys","containerSelector","querySelector","sel","className","key","opt","colorSchemasHuman","add","newSchema"],"mappings":"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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAEA;AACA;AACA;AACA;AACA,IAAG;AACH,GAAE;AACF,oBAAmB;AACnB;AACA,IAAG,OAAO;AACV;AACA;AACA;AACA;AACA,GAAE,OAAO;AACT;AACA;;AAEA,EAAC;;;;;;;;ACpKD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACTA;AACA;AACA;AACA;AACA,uCAAsC;AACtC,EAAC,mCAAmC;;AAEpC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,0BAAyB;AACzB;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,+BAA8B,sEAAsE;AACpG,+BAA8B;AAC9B,2CAA0C;AAC1C;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,gBAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,gBAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,0BAAyB,QAAQ;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA,wDAAuD,qCAAqC,EAAE;AAC9F,uDAAsD,+BAA+B,EAAE;;AAEvF;AACA,mDAAkD,OAAO;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAiC,yBAAyB,EAAE;AAC5D,gCAA+B,yBAAyB,EAAE;AAC1D,mCAAkC,yBAAyB,EAAE;AAC7D,mCAAkC,yBAAyB,EAAE;;AAE7D;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,+CAA8C;AAC9C,wDAAuD;AACvD;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,+BAA8B,sEAAsE;AACpG,+BAA8B;AAC9B,+BAA8B,oFAAoF;AAClH,kCAAiC;AACjC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,+BAA8B,4BAA4B;AAC1D,+BAA8B,4BAA4B;AAC1D,+BAA8B,4BAA4B,4FAA4F;AACtJ,kCAAiC;AACjC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,+BAA8B;AAC9B,+BAA8B;AAC9B,+BAA8B,oFAAoF,0EAA0E;AAC5L,+BAA8B;AAC9B,kCAAiC;AACjC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,wDAAuD;AACvD,iDAAgD;AAChD;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,+BAA8B,sEAAsE;AACpG,+BAA8B,4BAA4B;AAC1D,+BAA8B;AAC9B,oCAAmC;AACnC;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,+BAA8B,4BAA4B;AAC1D,+BAA8B,kDAAkD;AAChF,+BAA8B,4BAA4B;AAC1D,oCAAmC;AACnC;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,+BAA8B;AAC9B,+BAA8B;AAC9B,+BAA8B,kGAAkG;AAChI,+BAA8B;AAC9B,oCAAmC;AACnC;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,wDAAuD;AACvD,8CAA6C;AAC7C;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,+BAA8B,sEAAsE;AACpG,+BAA8B;AAC9B,+BAA8B;AAC9B,oCAAmC;AACnC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,+BAA8B,4BAA4B;AAC1D,+BAA8B,kDAAkD;AAChF,+BAA8B,4BAA4B;AAC1D,oCAAmC;AACnC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,+BAA8B;AAC9B,+BAA8B;AAC9B,+BAA8B,kGAAkG;AAChI,+BAA8B;AAC9B,oCAAmC;AACnC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,wDAAuD;AACvD,+DAA8D;AAC9D;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA,kDAAiD;AACjD;AACA,+BAA8B,sEAAsE;AACpG,+BAA8B;AAC9B,+BAA8B,0DAA0D;AACxF,iEAAgE;AAChE;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,2BAA0B,4BAA4B,EAAE;AACxD,0BAAyB,2BAA2B,EAAE;AACtD,2BAA0B,4BAA4B,EAAE;AACxD,kDAAiD,mDAAmD;AACpG;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,iCAAgC,QAAQ;AACxC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,WAAW;AACxB;AACA,cAAa,OAAO;AACpB;AACA,kBAAiB,QAAQ;AACzB;AACA,cAAa,WAAW;AACxB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,+BAA8B,sEAAsE;AACpG,+BAA8B;AAC9B;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,kEAAiE,OAAO;AACxE;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAe,OAAO;AACtB,kEAAiE,OAAO;AACxE;AACA;AACA;AACA;AACA;;AAEA,gCAA+B,OAAO;AACtC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iDAAgD,OAAO;AACvD,oBAAmB,OAAO;AAC1B,uBAAsB,OAAO;AAC7B;AACA;AACA;;AAEA;AACA;AACA,oEAAmE,OAAO;AAC1E,6BAA4B,OAAO;AACnC;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,2DAA0D,OAAO;AACjE,2BAA0B,OAAO;AACjC;AACA;AACA;AACA;;AAEA;AACA;AACA,mCAAkC,OAAO;AACzC,oCAAmC,OAAO;AAC1C;AACA;AACA;AACA;AACA,sBAAqB,OAAO;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,8CAA6C,0BAA0B,EAAE;AACzE;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mDAAkD,0BAA0B,EAAE;AAC9E;AACA;AACA;AACA;;AAEA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,+CAA8C,cAAc;;AAE5D,EAAC;;;;;;;AC34DD;AACA;AACA;AACA;AACA,uCAAsC;AACtC,EAAC,4BAA4B;;AAE7B;AACA;AACA;AACA;;AAEA;AACA;AACA,8BAA6B;AAC7B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;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","file":"demo-donut.js","sourcesContent":["'use strict';\n\nvar d3Selection = require('d3-selection'),\n    PubSub = require('pubsub-js'),\n\n    donut = require('./../src/charts/donut'),\n    legend = require('./../src/charts/legend'),\n\n    dataBuilder = require('./../test/fixtures/donutChartDataBuilder'),\n    colorSelectorHelper = require('./helpers/colorSelector'),\n\n    dataset = new dataBuilder.DonutDataBuilder()\n        .withFivePlusOther()\n        .build(),\n    legendChart;\n\n\nfunction createDonutChart(dataset, optionalColorSchema) {\n    var legendChart = getLegendChart(dataset, optionalColorSchema),\n        donutChart = donut(),\n        donutContainer = d3Selection.select('.js-donut-chart-container'),\n        containerWidth = donutContainer.node() ? donutContainer.node().getBoundingClientRect().width : false;\n\n    if (containerWidth) {\n        d3Selection.select('#button').on('click', function() {\n            donutChart.exportChart();\n        });\n\n        donutChart\n            .isAnimated(true)\n            .width(containerWidth)\n            .height(containerWidth)\n            .externalRadius(containerWidth/2.5)\n            .internalRadius(containerWidth/5)\n            .on('customMouseOver', function(data) {\n                legendChart.highlight(data.data.id);\n            })\n            .on('customMouseOut', function() {\n                legendChart.clearHighlight();\n            });\n\n        if (optionalColorSchema) {\n            donutChart.colorSchema(optionalColorSchema);\n        }\n\n        donutContainer.datum(dataset).call(donutChart);\n\n        d3Selection.select('#button').on('click', function() {\n            donutChart.exportChart('donut.png', 'Britecharts Donut Chart');\n        });\n    }\n}\n\nfunction getLegendChart(dataset, optionalColorSchema) {\n    var legendChart = legend(),\n        legendContainer = d3Selection.select('.js-legend-chart-container'),\n        containerWidth = legendContainer.node() ? legendContainer.node().getBoundingClientRect().width : false;\n\n    if (containerWidth) {\n        d3Selection.select('.js-legend-chart-container .britechart-legend').remove();\n\n        legendChart\n            .width(containerWidth*0.8)\n            .height(200)\n\n        if (optionalColorSchema) {\n            legendChart.colorSchema(optionalColorSchema);\n        }\n\n        legendContainer.datum(dataset).call(legendChart);\n\n        return legendChart;\n    }\n}\n\nfunction getInlineLegendChart(dataset, optionalColorSchema) {\n    var legendChart = legend(),\n        legendContainer = d3Selection.select('.js-inline-legend-chart-container'),\n        containerWidth = legendContainer.node() ? legendContainer.node().getBoundingClientRect().width : false;\n\n    if (containerWidth) {\n        d3Selection.select('.js-inline-legend-chart-container .britechart-legend').remove();\n\n        legendChart\n            .horizontal(true)\n            .width(containerWidth*0.6)\n            .markerSize(8)\n            .height(40)\n\n        if (optionalColorSchema) {\n            legendChart.colorSchema(optionalColorSchema);\n        }\n\n        legendContainer.datum(dataset).call(legendChart);\n\n        return legendChart;\n    }\n}\n\nfunction createSmallDonutChart() {\n    var donutChart = donut(),\n        donutContainer = d3Selection.select('.js-small-donut-chart-container'),\n        containerWidth = donutContainer.node() ? donutContainer.node().getBoundingClientRect().width : false,\n        dataset = new dataBuilder.DonutDataBuilder()\n            .withThreeCategories()\n            .build(),\n        legendChart = getInlineLegendChart(dataset);\n\n    if (containerWidth) {\n        donutChart\n            .width(containerWidth)\n            .height(containerWidth/1.8)\n            .externalRadius(containerWidth/5)\n            .internalRadius(containerWidth/10)\n            .on('customMouseOver', function(data) {\n                legendChart.highlight(data.data.id);\n            })\n            .on('customMouseOut', function() {\n                legendChart.clearHighlight();\n            });\n\n        donutContainer.datum(dataset).call(donutChart);\n    }\n}\n\n// Show charts if container available\nif (d3Selection.select('.js-donut-chart-container').node()) {\n    createDonutChart(dataset);\n    createSmallDonutChart();\n\n    var redrawCharts = function(){\n        d3Selection.selectAll('.donut-chart').remove();\n\n        createDonutChart(dataset);\n        createSmallDonutChart();\n    };\n\n    // Redraw charts on window resize\n    PubSub.subscribe('resize', redrawCharts);\n\n    // Color schema selector\n    colorSelectorHelper.createColorSelector('.js-color-selector-container', '.donut-chart', createDonutChart.bind(null, dataset));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./demos/demo-donut.js","define(function(require) {\n\n    const d3Selection = require('d3-selection');\n\n    const wrapConfig = {\n        lineHeight: 1.2,\n        smallTextOffset: 10,\n        smallTextLineHeightRatio: 0.9,\n        smallTextRatio: 0.6,\n        valueClassName: 'value',\n        labelClassName: 'label'\n    };\n\n    const defaultTextSize = 12;\n    const defaultFontFace = 'Arial';\n\n    /**\n     * Wraps a selection of text within the available width\n     * @param  {Number} fontSize       Size of the base font\n     * @param  {Number} availableWidth Width of the container where the text needs to wrap on\n     * @param  {D3Selection} node      SVG text element that contains the text to wrap\n     *\n     * REF: http://bl.ocks.org/mbostock/7555321\n     * More discussions on https://github.com/mbostock/d3/issues/1642\n     * @return {void}\n     */\n    const wrapText = function(xOffset, fontSize, availableWidth, node, data, i) {\n        let text = d3Selection.select(node),\n            words = text.text().split(/\\s+/).reverse(),\n            word,\n            line = [],\n            lineNumber = 0,\n            smallLineHeight = wrapConfig.lineHeight * wrapConfig.smallTextLineHeightRatio,\n            y = text.attr('y'),\n            dy = parseFloat(text.attr('dy')),\n            smallFontSize = fontSize * wrapConfig.smallTextRatio,\n            tspan = text.text(null).append('tspan')\n                .attr('x', xOffset)\n                .attr('y', y - 5)\n                .attr('dy', dy + 'em')\n                .classed(wrapConfig.valueClassName, true)\n                .style('font-size', fontSize + 'px');\n\n        tspan.text(words.pop());\n        tspan = text.append('tspan')\n            .classed(wrapConfig.labelClassName, true)\n            .attr('x', xOffset)\n            .attr('y', y + wrapConfig.smallTextOffset)\n            .attr('dy', ++lineNumber * smallLineHeight + dy + 'em')\n            .style('font-size', smallFontSize + 'px');\n\n        while (word = words.pop()) {\n            line.push(word);\n            tspan.text(line.join(' '));\n            if (tspan.node().getComputedTextLength() > availableWidth - 50) {\n                line.pop();\n                tspan.text(line.join(' '));\n                line = [word];\n                tspan = text.append('tspan')\n                    .classed(wrapConfig.labelClassName, true)\n                    .attr('x', xOffset)\n                    .attr('y', y+ wrapConfig.smallTextOffset)\n                    .attr('dy', ++lineNumber * smallLineHeight + dy + 'em')\n                    .text(word)\n                    .style('font-size', smallFontSize + 'px');\n            }\n        }\n    };\n\n    /**\n     * Wraps a selection of text within the available width, also adds class .adjust-upwards\n     * to configure a y offset for entries with multiple rows\n     * @param  {D3Sekectuib} text       d3 text element\n     * @param  {Number} width           Width of the container where the text needs to wrap on\n     * @param  {Number} xpos            number passed to determine the x offset\n     * @param  {Number} limit           number of lines before an ellipses is added and the rest of the text is cut off\n     *\n     * REF: http://bl.ocks.org/mbostock/7555321\n     * More discussions on https://github.com/mbostock/d3/issues/1642\n     * @return {void}\n     */\n    const wrapTextWithEllipses = function(text, width, xpos=0, limit=2) {\n\n            text.each(function() {\n                var words,\n                    word,\n                    line,\n                    lineNumber,\n                    lineHeight,\n                    y,\n                    dy,\n                    tspan;\n\n                text = d3Selection.select(this);\n\n                words = text.text().split(/\\s+/).reverse();\n                line = [];\n                lineNumber = 0;\n                lineHeight = 1.2;\n                y = text.attr('y');\n                dy = parseFloat(text.attr('dy'));\n                tspan = text\n                    .text(null)\n                    .append('tspan')\n                    .attr('x', xpos)\n                    .attr('y', y)\n                    .attr('dy', dy + 'em');\n\n                while ((word = words.pop())) {\n                    line.push(word);\n                    tspan.text(line.join(' '));\n\n                    if (tspan.node().getComputedTextLength() > width) {\n                        line.pop();\n                        tspan.text(line.join(' '));\n\n                        if (lineNumber < limit - 1) {\n                            line = [word];\n                            tspan = text.append('tspan')\n                                .attr('x', xpos)\n                                .attr('y', y)\n                                .attr('dy', ++lineNumber * lineHeight + dy + 'em')\n                                .text(word);\n                            // if we need two lines for the text, move them both up to center them\n                            text.classed('adjust-upwards', true);\n                        } else {\n                            line.push('...');\n                            tspan.text(line.join(' '));\n                            break;\n                        }\n                    }\n                }\n            });\n    };\n\n    /**\n     * Figures out an approximate of the text width by using a canvas element\n     * This avoids having to actually render the text to measure it from the DOM itself\n     * @param  {String} text     Text to measure\n     * @param  {Number} fontSize Fontsize (or default)\n     * @param  {String} fontFace Font familty (or default)\n     * @return {String}          Approximate font size of the text\n     */\n    const getTextWidth = function(text, fontSize = defaultTextSize, fontFace = defaultFontFace) {\n        let a = document.createElement('canvas'),\n            b = a.getContext('2d');\n\n        b.font = fontSize + 'px ' + fontFace;\n\n        return b.measureText(text).width;\n    }\n\n    return {\n        getTextWidth,\n        wrapText,\n        wrapTextWithEllipses\n    };\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/charts/helpers/text.js","define(function(require) {\n    'use strict';\n\n    const {colorSchemas} = require('./colors.js');\n    const constants = require('./constants.js');\n    const serializeWithStyles = require('./serializeWithStyles.js');\n\n    let encoder = window.btoa;\n\n    if (!encoder) {\n        encoder = require('base-64').encode;\n    }\n\n    // Base64 doesn't work really well with Unicode strings, so we need to use this function\n    // Ref: https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding\n    const b64EncodeUnicode = (str) => {\n        return encoder(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, function(match, p1) {\n            return String.fromCharCode('0x' + p1);\n        }));\n    };\n\n    const config = {\n        styleClass : 'britechartStyle',\n        defaultFilename: 'britechart.png',\n        chartBackground: 'white',\n        imageSourceBase: 'data:image/svg+xml;base64,',\n        titleFontSize: '15px',\n        titleFontFamily: '\\'Benton Sans\\', sans-serif',\n        titleTopOffset: 30,\n        get styleBackgroundString () {\n            return `<style>svg{background:${this.chartBackground};}</style>`;\n        }\n    };\n\n    /**\n     * Main function to be used as a method by chart instances to export charts to png\n     * @param  {array} svgs         (or an svg element) pass in both chart & legend as array or just chart as svg or in array\n     * @param  {string} filename    [download to be called <filename>.png]\n     * @param  {string} title       Title for the image\n     */\n    function exportChart(d3svg, filename, title) {\n        let img = createImage(convertSvgToHtml.call(this, d3svg, title));\n\n        img.onload = handleImageLoad.bind(\n                img,\n                createCanvas(this.width(), this.height()),\n                filename\n            );\n    }\n\n    /**\n     * adds background styles to raw html\n     * @param {string} html raw html\n     */\n    function addBackground(html) {\n        return html.replace('>',`>${config.styleBackgroundString}`);\n    }\n\n    /**\n     * takes d3 svg el, adds proper svg tags, adds inline styles\n     * from stylesheets, adds white background and returns string\n     * @param  {object} d3svg TYPE d3 svg element\n     * @return {string} string of passed d3\n     */\n    function convertSvgToHtml (d3svg, title) {\n        if (!d3svg) {\n            return;\n        }\n\n        d3svg.attr('version', 1.1)\n            .attr('xmlns', 'http://www.w3.org/2000/svg');\n        let serializer = serializeWithStyles.initializeSerializer();\n        let html = serializer(d3svg.node());\n        html = formatHtmlByBrowser(html);\n        html = prependTitle.call(this, html, title, parseInt(d3svg.attr('width')));\n        html = addBackground(html);\n\n        return html;\n    }\n\n    /**\n     * Create Canvas\n     * @param  {number} width\n     * @param  {number} height\n     * @return {object} TYPE canvas element\n     */\n    function createCanvas(width, height) {\n        let canvas = document.createElement('canvas');\n\n        canvas.height = height;\n        canvas.width = width;\n\n        return canvas;\n    }\n\n    /**\n     * Create Image\n     * @param  {string} svgHtml string representation of svg el\n     * @return {object}  TYPE element <img>, src points at svg\n     */\n    function createImage(svgHtml) {\n        let img = new Image();\n\n        img.src = `${config.imageSourceBase}${ b64EncodeUnicode(svgHtml) }`;\n\n        return img;\n    };\n\n    /**\n     * Draws image on canvas\n     * @param  {object} image TYPE:el <img>, to be drawn\n     * @param  {object} canvas TYPE: el <canvas>, to draw on\n     */\n    function drawImageOnCanvas(image, canvas) {\n        canvas.getContext('2d').drawImage(image, 0, 0);\n\n        return canvas;\n    }\n\n    /**\n     * Triggers browser to download image, convert canvas to url,\n     * we need to append the link el to the dom before clicking it for Firefox to register\n     * point <a> at it and trigger click\n     * @param  {object} canvas TYPE: el <canvas>\n     * @param  {string} filename\n     * @param  {string} extensionType\n     */\n    function downloadCanvas(canvas, filename=config.defaultFilename, extensionType='image/png') {\n        let url = canvas.toDataURL(extensionType);\n        let link = document.createElement('a');\n\n        link.href = url;\n        link.download = filename;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n    }\n\n    /**\n     * Some browsers need special formatting, we handle that here\n     * @param  {string} html string of svg html\n     * @return {string} string of svg html\n     */\n    function formatHtmlByBrowser(html) {\n        if (navigator.userAgent.search('FireFox') > -1) {\n            return html.replace(/url.*&quot;\\)/, `url(&quot;#${constants.lineGradientId}&quot;);`);\n        }\n\n        return html;\n    }\n\n    /**\n     * Handles on load event fired by img.onload, this=img\n     * @param  {object} canvas TYPE: el <canvas>\n     * @param  {string} filename\n     * @param  {object} e\n     */\n    function handleImageLoad(canvas, filename, e) {\n        e.preventDefault();\n\n        downloadCanvas(drawImageOnCanvas(this, canvas), filename);\n    }\n\n    /**\n     * if passed, append title to the raw html to appear on graph\n     * @param  {string} html     raw html string\n     * @param  {string} title    title of the graph\n     * @param  {number} svgWidth width of graph container\n     * @return {string}         raw html with title prepended\n     */\n    function prependTitle(html, title, svgWidth) {\n        if (!title || !svgWidth) {\n            return html;\n        }\n        let {britechartsGreySchema} = colorSchemas;\n        html =  html.replace(/<g/,`<text x=\"${this.margin().left}\" y=\"${config.titleTopOffset}\" font-family=\"${config.titleFontFamily}\" font-size=\"${config.titleFontSize}\" fill=\"${britechartsGreySchema[6]}\"> ${title} </text><g `);\n\n        return html;\n    }\n\n    return {\n        exportChart,\n        convertSvgToHtml,\n        createImage,\n        drawImageOnCanvas\n    };\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/charts/helpers/exportChart.js","module.exports = (function() {\n\n    'use strict';\n\n    return {\n\n        /**\n         * returns serializer function, only run it when you know you want to serialize your chart\n         * @return {func} serializer to add styles in line to dom string\n         */\n        initializeSerializer() {\n\n            // Mapping between tag names and css default values lookup tables. This allows to exclude default values in the result.\n            const defaultStylesByTagName = {};\n\n            // Styles inherited from style sheets will not be rendered for elements with these tag names\n            const noStyleTags = {'BASE':true,'HEAD':true,'HTML':true,'META':true,'NOFRAME':true,'NOSCRIPT':true,'PARAM':true,'SCRIPT':true,'STYLE':true,'TITLE':true};\n\n            // This list determines which css default values lookup tables are precomputed at load time\n            // Lookup tables for other tag names will be automatically built at runtime if needed\n            const tagNames = ['A','ABBR','ADDRESS','AREA','ARTICLE','ASIDE','AUDIO','B','BASE','BDI','BDO','BLOCKQUOTE','BODY','BR','BUTTON','CANVAS','CAPTION','CENTER','CITE','CODE','COL','COLGROUP','COMMAND','DATALIST','DD','DEL','DETAILS','DFN','DIV','DL','DT','EM','EMBED','FIELDSET','FIGCAPTION','FIGURE','FONT','FOOTER','FORM','H1','H2','H3','H4','H5','H6','HEAD','HEADER','HGROUP','HR','HTML','I','IFRAME','IMG','INPUT','INS','KBD','LABEL','LEGEND','LI','LINK','MAP','MARK','MATH','MENU','META','METER','NAV','NOBR','NOSCRIPT','OBJECT','OL','OPTION','OPTGROUP','OUTPUT','P','PARAM','PRE','PROGRESS','Q','RP','RT','RUBY','S','SAMP','SCRIPT','SECTION','SELECT','SMALL','SOURCE','SPAN','STRONG','STYLE','SUB','SUMMARY','SUP','SVG','TABLE','TBODY','TD','TEXTAREA','TFOOT','TH','THEAD','TIME','TITLE','TR','TRACK','U','UL','VAR','VIDEO','WBR'];\n\n            // Precompute the lookup tables.\n            [].forEach.call(tagNames, (name) => {\n                if (!noStyleTags[name]) {\n                    defaultStylesByTagName[name] = computeDefaultStyleByTagName(name);\n                }\n            });\n\n            function computeDefaultStyleByTagName(tagName) {\n                let defaultStyle = {},\n                    element = document.body.appendChild(document.createElement(tagName)),\n                    computedStyle = window.getComputedStyle(element);\n\n                [].forEach.call(computedStyle, (style) => {\n                    defaultStyle[style] = computedStyle[style];\n                });\n                document.body.removeChild(element);\n                return defaultStyle;\n            }\n\n            function getDefaultStyleByTagName (tagName) {\n                tagName = tagName.toUpperCase();\n                if (!defaultStylesByTagName[tagName]) {\n                    defaultStylesByTagName[tagName] = computeDefaultStyleByTagName(tagName);\n                }\n                return defaultStylesByTagName[tagName];\n            };\n\n            function serializeWithStyles(elem) {\n\n                let cssTexts = [],\n                    elements,\n                    computedStyle,\n                    defaultStyle,\n                    result;\n\n                if (!elem || elem.nodeType !== Node.ELEMENT_NODE) {\n                    console.error('Error: Object passed in to serializeWithSyles not of nodeType Node.ELEMENT_NODE');\n                    return;\n                }\n\n                cssTexts = [];\n                elements = elem.querySelectorAll('*');\n\n                [].forEach.call(elements, (el, i) => {\n                    if (!noStyleTags[el.tagName]) {\n                        computedStyle = window.getComputedStyle(el);\n                        defaultStyle = getDefaultStyleByTagName(el.tagName);\n                        cssTexts[i] = el.style.cssText;\n                        [].forEach.call(computedStyle, (cssPropName) => {\n                            if (computedStyle[cssPropName] !== defaultStyle[cssPropName]) {\n                                el.style[cssPropName] = computedStyle[cssPropName];\n                            }\n                        });\n                    }\n                });\n\n                result = elem.outerHTML;\n                elements = [].map.call(elements, (el, i) => {\n                    el.style.cssText = cssTexts[i];\n                    return el;\n                });\n\n                return result;\n\n            };\n\n            return serializeWithStyles;\n        }\n    }\n})();\n\n\n// WEBPACK FOOTER //\n// ./src/charts/helpers/serializeWithStyles.js","/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */\n;(function(root) {\n\n\t// Detect free variables `exports`.\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`.\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code, and use\n\t// it as `root`.\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar InvalidCharacterError = function(message) {\n\t\tthis.message = message;\n\t};\n\tInvalidCharacterError.prototype = new Error;\n\tInvalidCharacterError.prototype.name = 'InvalidCharacterError';\n\n\tvar error = function(message) {\n\t\t// Note: the error messages used throughout this file match those used by\n\t\t// the native `atob`/`btoa` implementation in Chromium.\n\t\tthrow new InvalidCharacterError(message);\n\t};\n\n\tvar TABLE = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\t// http://whatwg.org/html/common-microsyntaxes.html#space-character\n\tvar REGEX_SPACE_CHARACTERS = /[\\t\\n\\f\\r ]/g;\n\n\t// `decode` is designed to be fully compatible with `atob` as described in the\n\t// HTML Standard. http://whatwg.org/html/webappapis.html#dom-windowbase64-atob\n\t// The optimized base64-decoding algorithm used is based on @atk’s excellent\n\t// implementation. https://gist.github.com/atk/1020396\n\tvar decode = function(input) {\n\t\tinput = String(input)\n\t\t\t.replace(REGEX_SPACE_CHARACTERS, '');\n\t\tvar length = input.length;\n\t\tif (length % 4 == 0) {\n\t\t\tinput = input.replace(/==?$/, '');\n\t\t\tlength = input.length;\n\t\t}\n\t\tif (\n\t\t\tlength % 4 == 1 ||\n\t\t\t// http://whatwg.org/C#alphanumeric-ascii-characters\n\t\t\t/[^+a-zA-Z0-9/]/.test(input)\n\t\t) {\n\t\t\terror(\n\t\t\t\t'Invalid character: the string to be decoded is not correctly encoded.'\n\t\t\t);\n\t\t}\n\t\tvar bitCounter = 0;\n\t\tvar bitStorage;\n\t\tvar buffer;\n\t\tvar output = '';\n\t\tvar position = -1;\n\t\twhile (++position < length) {\n\t\t\tbuffer = TABLE.indexOf(input.charAt(position));\n\t\t\tbitStorage = bitCounter % 4 ? bitStorage * 64 + buffer : buffer;\n\t\t\t// Unless this is the first of a group of 4 characters…\n\t\t\tif (bitCounter++ % 4) {\n\t\t\t\t// …convert the first 8 bits to a single ASCII character.\n\t\t\t\toutput += String.fromCharCode(\n\t\t\t\t\t0xFF & bitStorage >> (-2 * bitCounter & 6)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t};\n\n\t// `encode` is designed to be fully compatible with `btoa` as described in the\n\t// HTML Standard: http://whatwg.org/html/webappapis.html#dom-windowbase64-btoa\n\tvar encode = function(input) {\n\t\tinput = String(input);\n\t\tif (/[^\\0-\\xFF]/.test(input)) {\n\t\t\t// Note: no need to special-case astral symbols here, as surrogates are\n\t\t\t// matched, and the input is supposed to only contain ASCII anyway.\n\t\t\terror(\n\t\t\t\t'The string to be encoded contains characters outside of the ' +\n\t\t\t\t'Latin1 range.'\n\t\t\t);\n\t\t}\n\t\tvar padding = input.length % 3;\n\t\tvar output = '';\n\t\tvar position = -1;\n\t\tvar a;\n\t\tvar b;\n\t\tvar c;\n\t\tvar d;\n\t\tvar buffer;\n\t\t// Make sure any padding is handled outside of the loop.\n\t\tvar length = input.length - padding;\n\n\t\twhile (++position < length) {\n\t\t\t// Read three bytes, i.e. 24 bits.\n\t\t\ta = input.charCodeAt(position) << 16;\n\t\t\tb = input.charCodeAt(++position) << 8;\n\t\t\tc = input.charCodeAt(++position);\n\t\t\tbuffer = a + b + c;\n\t\t\t// Turn the 24 bits into four chunks of 6 bits each, and append the\n\t\t\t// matching character for each of them to the output.\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 18 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer >> 12 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer >> 6 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer & 0x3F)\n\t\t\t);\n\t\t}\n\n\t\tif (padding == 2) {\n\t\t\ta = input.charCodeAt(position) << 8;\n\t\t\tb = input.charCodeAt(++position);\n\t\t\tbuffer = a + b;\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 10) +\n\t\t\t\tTABLE.charAt((buffer >> 4) & 0x3F) +\n\t\t\t\tTABLE.charAt((buffer << 2) & 0x3F) +\n\t\t\t\t'='\n\t\t\t);\n\t\t} else if (padding == 1) {\n\t\t\tbuffer = input.charCodeAt(position);\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 2) +\n\t\t\t\tTABLE.charAt((buffer << 4) & 0x3F) +\n\t\t\t\t'=='\n\t\t\t);\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tvar base64 = {\n\t\t'encode': encode,\n\t\t'decode': decode,\n\t\t'version': '0.1.0'\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn base64;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = base64;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (var key in base64) {\n\t\t\t\tbase64.hasOwnProperty(key) && (freeExports[key] = base64[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.base64 = base64;\n\t}\n\n}(this));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.0.1.0@base-64/base64.js\n// module id = 22\n// module chunks = 0 2 3 4 5 6","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 23\n// module chunks = 0 2 3 4 5 6","// https://d3js.org/d3-shape/ Version 1.1.1. Copyright 2017 Mike Bostock.\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('d3-path')) :\n\ttypeof define === 'function' && define.amd ? define(['exports', 'd3-path'], factory) :\n\t(factory((global.d3 = global.d3 || {}),global.d3));\n}(this, (function (exports,d3Path) { 'use strict';\n\nvar constant = function(x) {\n  return function constant() {\n    return x;\n  };\n};\n\nvar abs = Math.abs;\nvar atan2 = Math.atan2;\nvar cos = Math.cos;\nvar max = Math.max;\nvar min = Math.min;\nvar sin = Math.sin;\nvar sqrt = Math.sqrt;\n\nvar epsilon = 1e-12;\nvar pi = Math.PI;\nvar halfPi = pi / 2;\nvar tau = 2 * pi;\n\nfunction acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nfunction asin(x) {\n  return x >= 1 ? halfPi : x <= -1 ? -halfPi : Math.asin(x);\n}\n\nfunction arcInnerRadius(d) {\n  return d.innerRadius;\n}\n\nfunction arcOuterRadius(d) {\n  return d.outerRadius;\n}\n\nfunction arcStartAngle(d) {\n  return d.startAngle;\n}\n\nfunction arcEndAngle(d) {\n  return d.endAngle;\n}\n\nfunction arcPadAngle(d) {\n  return d && d.padAngle; // Note: optional!\n}\n\nfunction intersect(x0, y0, x1, y1, x2, y2, x3, y3) {\n  var x10 = x1 - x0, y10 = y1 - y0,\n      x32 = x3 - x2, y32 = y3 - y2,\n      t = (x32 * (y0 - y2) - y32 * (x0 - x2)) / (y32 * x10 - x32 * y10);\n  return [x0 + t * x10, y0 + t * y10];\n}\n\n// Compute perpendicular offset line of length rc.\n// http://mathworld.wolfram.com/Circle-LineIntersection.html\nfunction cornerTangents(x0, y0, x1, y1, r1, rc, cw) {\n  var x01 = x0 - x1,\n      y01 = y0 - y1,\n      lo = (cw ? rc : -rc) / sqrt(x01 * x01 + y01 * y01),\n      ox = lo * y01,\n      oy = -lo * x01,\n      x11 = x0 + ox,\n      y11 = y0 + oy,\n      x10 = x1 + ox,\n      y10 = y1 + oy,\n      x00 = (x11 + x10) / 2,\n      y00 = (y11 + y10) / 2,\n      dx = x10 - x11,\n      dy = y10 - y11,\n      d2 = dx * dx + dy * dy,\n      r = r1 - rc,\n      D = x11 * y10 - x10 * y11,\n      d = (dy < 0 ? -1 : 1) * sqrt(max(0, r * r * d2 - D * D)),\n      cx0 = (D * dy - dx * d) / d2,\n      cy0 = (-D * dx - dy * d) / d2,\n      cx1 = (D * dy + dx * d) / d2,\n      cy1 = (-D * dx + dy * d) / d2,\n      dx0 = cx0 - x00,\n      dy0 = cy0 - y00,\n      dx1 = cx1 - x00,\n      dy1 = cy1 - y00;\n\n  // Pick the closer of the two intersection points.\n  // TODO Is there a faster way to determine which intersection to use?\n  if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) cx0 = cx1, cy0 = cy1;\n\n  return {\n    cx: cx0,\n    cy: cy0,\n    x01: -ox,\n    y01: -oy,\n    x11: cx0 * (r1 / r - 1),\n    y11: cy0 * (r1 / r - 1)\n  };\n}\n\nvar arc = function() {\n  var innerRadius = arcInnerRadius,\n      outerRadius = arcOuterRadius,\n      cornerRadius = constant(0),\n      padRadius = null,\n      startAngle = arcStartAngle,\n      endAngle = arcEndAngle,\n      padAngle = arcPadAngle,\n      context = null;\n\n  function arc() {\n    var buffer,\n        r,\n        r0 = +innerRadius.apply(this, arguments),\n        r1 = +outerRadius.apply(this, arguments),\n        a0 = startAngle.apply(this, arguments) - halfPi,\n        a1 = endAngle.apply(this, arguments) - halfPi,\n        da = abs(a1 - a0),\n        cw = a1 > a0;\n\n    if (!context) context = buffer = d3Path.path();\n\n    // Ensure that the outer radius is always larger than the inner radius.\n    if (r1 < r0) r = r1, r1 = r0, r0 = r;\n\n    // Is it a point?\n    if (!(r1 > epsilon)) context.moveTo(0, 0);\n\n    // Or is it a circle or annulus?\n    else if (da > tau - epsilon) {\n      context.moveTo(r1 * cos(a0), r1 * sin(a0));\n      context.arc(0, 0, r1, a0, a1, !cw);\n      if (r0 > epsilon) {\n        context.moveTo(r0 * cos(a1), r0 * sin(a1));\n        context.arc(0, 0, r0, a1, a0, cw);\n      }\n    }\n\n    // Or is it a circular or annular sector?\n    else {\n      var a01 = a0,\n          a11 = a1,\n          a00 = a0,\n          a10 = a1,\n          da0 = da,\n          da1 = da,\n          ap = padAngle.apply(this, arguments) / 2,\n          rp = (ap > epsilon) && (padRadius ? +padRadius.apply(this, arguments) : sqrt(r0 * r0 + r1 * r1)),\n          rc = min(abs(r1 - r0) / 2, +cornerRadius.apply(this, arguments)),\n          rc0 = rc,\n          rc1 = rc,\n          t0,\n          t1;\n\n      // Apply padding? Note that since r1 ≥ r0, da1 ≥ da0.\n      if (rp > epsilon) {\n        var p0 = asin(rp / r0 * sin(ap)),\n            p1 = asin(rp / r1 * sin(ap));\n        if ((da0 -= p0 * 2) > epsilon) p0 *= (cw ? 1 : -1), a00 += p0, a10 -= p0;\n        else da0 = 0, a00 = a10 = (a0 + a1) / 2;\n        if ((da1 -= p1 * 2) > epsilon) p1 *= (cw ? 1 : -1), a01 += p1, a11 -= p1;\n        else da1 = 0, a01 = a11 = (a0 + a1) / 2;\n      }\n\n      var x01 = r1 * cos(a01),\n          y01 = r1 * sin(a01),\n          x10 = r0 * cos(a10),\n          y10 = r0 * sin(a10);\n\n      // Apply rounded corners?\n      if (rc > epsilon) {\n        var x11 = r1 * cos(a11),\n            y11 = r1 * sin(a11),\n            x00 = r0 * cos(a00),\n            y00 = r0 * sin(a00);\n\n        // Restrict the corner radius according to the sector angle.\n        if (da < pi) {\n          var oc = da0 > epsilon ? intersect(x01, y01, x00, y00, x11, y11, x10, y10) : [x10, y10],\n              ax = x01 - oc[0],\n              ay = y01 - oc[1],\n              bx = x11 - oc[0],\n              by = y11 - oc[1],\n              kc = 1 / sin(acos((ax * bx + ay * by) / (sqrt(ax * ax + ay * ay) * sqrt(bx * bx + by * by))) / 2),\n              lc = sqrt(oc[0] * oc[0] + oc[1] * oc[1]);\n          rc0 = min(rc, (r0 - lc) / (kc - 1));\n          rc1 = min(rc, (r1 - lc) / (kc + 1));\n        }\n      }\n\n      // Is the sector collapsed to a line?\n      if (!(da1 > epsilon)) context.moveTo(x01, y01);\n\n      // Does the sector’s outer ring have rounded corners?\n      else if (rc1 > epsilon) {\n        t0 = cornerTangents(x00, y00, x01, y01, r1, rc1, cw);\n        t1 = cornerTangents(x11, y11, x10, y10, r1, rc1, cw);\n\n        context.moveTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc1 < rc) context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r1, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), !cw);\n          context.arc(t1.cx, t1.cy, rc1, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the outer ring just a circular arc?\n      else context.moveTo(x01, y01), context.arc(0, 0, r1, a01, a11, !cw);\n\n      // Is there no inner ring, and it’s a circular sector?\n      // Or perhaps it’s an annular sector collapsed due to padding?\n      if (!(r0 > epsilon) || !(da0 > epsilon)) context.lineTo(x10, y10);\n\n      // Does the sector’s inner ring (or point) have rounded corners?\n      else if (rc0 > epsilon) {\n        t0 = cornerTangents(x10, y10, x11, y11, r0, -rc0, cw);\n        t1 = cornerTangents(x01, y01, x00, y00, r0, -rc0, cw);\n\n        context.lineTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc0 < rc) context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r0, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), cw);\n          context.arc(t1.cx, t1.cy, rc0, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the inner ring just a circular arc?\n      else context.arc(0, 0, r0, a10, a00, cw);\n    }\n\n    context.closePath();\n\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  arc.centroid = function() {\n    var r = (+innerRadius.apply(this, arguments) + +outerRadius.apply(this, arguments)) / 2,\n        a = (+startAngle.apply(this, arguments) + +endAngle.apply(this, arguments)) / 2 - pi / 2;\n    return [cos(a) * r, sin(a) * r];\n  };\n\n  arc.innerRadius = function(_) {\n    return arguments.length ? (innerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : innerRadius;\n  };\n\n  arc.outerRadius = function(_) {\n    return arguments.length ? (outerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : outerRadius;\n  };\n\n  arc.cornerRadius = function(_) {\n    return arguments.length ? (cornerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : cornerRadius;\n  };\n\n  arc.padRadius = function(_) {\n    return arguments.length ? (padRadius = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), arc) : padRadius;\n  };\n\n  arc.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : startAngle;\n  };\n\n  arc.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : endAngle;\n  };\n\n  arc.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : padAngle;\n  };\n\n  arc.context = function(_) {\n    return arguments.length ? ((context = _ == null ? null : _), arc) : context;\n  };\n\n  return arc;\n};\n\nfunction Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // proceed\n      default: this._context.lineTo(x, y); break;\n    }\n  }\n};\n\nvar curveLinear = function(context) {\n  return new Linear(context);\n};\n\nfunction x(p) {\n  return p[0];\n}\n\nfunction y(p) {\n  return p[1];\n}\n\nvar line = function() {\n  var x$$1 = x,\n      y$$1 = y,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  function line(data) {\n    var i,\n        n = data.length,\n        d,\n        defined0 = false,\n        buffer;\n\n    if (context == null) output = curve(buffer = d3Path.path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) output.lineStart();\n        else output.lineEnd();\n      }\n      if (defined0) output.point(+x$$1(d, i, data), +y$$1(d, i, data));\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  line.x = function(_) {\n    return arguments.length ? (x$$1 = typeof _ === \"function\" ? _ : constant(+_), line) : x$$1;\n  };\n\n  line.y = function(_) {\n    return arguments.length ? (y$$1 = typeof _ === \"function\" ? _ : constant(+_), line) : y$$1;\n  };\n\n  line.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), line) : defined;\n  };\n\n  line.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;\n  };\n\n  line.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;\n  };\n\n  return line;\n};\n\nvar area = function() {\n  var x0 = x,\n      x1 = null,\n      y0 = constant(0),\n      y1 = y,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  function area(data) {\n    var i,\n        j,\n        k,\n        n = data.length,\n        d,\n        defined0 = false,\n        buffer,\n        x0z = new Array(n),\n        y0z = new Array(n);\n\n    if (context == null) output = curve(buffer = d3Path.path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) {\n          j = i;\n          output.areaStart();\n          output.lineStart();\n        } else {\n          output.lineEnd();\n          output.lineStart();\n          for (k = i - 1; k >= j; --k) {\n            output.point(x0z[k], y0z[k]);\n          }\n          output.lineEnd();\n          output.areaEnd();\n        }\n      }\n      if (defined0) {\n        x0z[i] = +x0(d, i, data), y0z[i] = +y0(d, i, data);\n        output.point(x1 ? +x1(d, i, data) : x0z[i], y1 ? +y1(d, i, data) : y0z[i]);\n      }\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  function arealine() {\n    return line().defined(defined).curve(curve).context(context);\n  }\n\n  area.x = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), x1 = null, area) : x0;\n  };\n\n  area.x0 = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), area) : x0;\n  };\n\n  area.x1 = function(_) {\n    return arguments.length ? (x1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : x1;\n  };\n\n  area.y = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), y1 = null, area) : y0;\n  };\n\n  area.y0 = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), area) : y0;\n  };\n\n  area.y1 = function(_) {\n    return arguments.length ? (y1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : y1;\n  };\n\n  area.lineX0 =\n  area.lineY0 = function() {\n    return arealine().x(x0).y(y0);\n  };\n\n  area.lineY1 = function() {\n    return arealine().x(x0).y(y1);\n  };\n\n  area.lineX1 = function() {\n    return arealine().x(x1).y(y0);\n  };\n\n  area.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), area) : defined;\n  };\n\n  area.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), area) : curve;\n  };\n\n  area.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), area) : context;\n  };\n\n  return area;\n};\n\nvar descending = function(a, b) {\n  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n};\n\nvar identity = function(d) {\n  return d;\n};\n\nvar pie = function() {\n  var value = identity,\n      sortValues = descending,\n      sort = null,\n      startAngle = constant(0),\n      endAngle = constant(tau),\n      padAngle = constant(0);\n\n  function pie(data) {\n    var i,\n        n = data.length,\n        j,\n        k,\n        sum = 0,\n        index = new Array(n),\n        arcs = new Array(n),\n        a0 = +startAngle.apply(this, arguments),\n        da = Math.min(tau, Math.max(-tau, endAngle.apply(this, arguments) - a0)),\n        a1,\n        p = Math.min(Math.abs(da) / n, padAngle.apply(this, arguments)),\n        pa = p * (da < 0 ? -1 : 1),\n        v;\n\n    for (i = 0; i < n; ++i) {\n      if ((v = arcs[index[i] = i] = +value(data[i], i, data)) > 0) {\n        sum += v;\n      }\n    }\n\n    // Optionally sort the arcs by previously-computed values or by data.\n    if (sortValues != null) index.sort(function(i, j) { return sortValues(arcs[i], arcs[j]); });\n    else if (sort != null) index.sort(function(i, j) { return sort(data[i], data[j]); });\n\n    // Compute the arcs! They are stored in the original data's order.\n    for (i = 0, k = sum ? (da - n * pa) / sum : 0; i < n; ++i, a0 = a1) {\n      j = index[i], v = arcs[j], a1 = a0 + (v > 0 ? v * k : 0) + pa, arcs[j] = {\n        data: data[j],\n        index: i,\n        value: v,\n        startAngle: a0,\n        endAngle: a1,\n        padAngle: p\n      };\n    }\n\n    return arcs;\n  }\n\n  pie.value = function(_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), pie) : value;\n  };\n\n  pie.sortValues = function(_) {\n    return arguments.length ? (sortValues = _, sort = null, pie) : sortValues;\n  };\n\n  pie.sort = function(_) {\n    return arguments.length ? (sort = _, sortValues = null, pie) : sort;\n  };\n\n  pie.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : startAngle;\n  };\n\n  pie.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : endAngle;\n  };\n\n  pie.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : padAngle;\n  };\n\n  return pie;\n};\n\nvar curveRadialLinear = curveRadial(curveLinear);\n\nfunction Radial(curve) {\n  this._curve = curve;\n}\n\nRadial.prototype = {\n  areaStart: function() {\n    this._curve.areaStart();\n  },\n  areaEnd: function() {\n    this._curve.areaEnd();\n  },\n  lineStart: function() {\n    this._curve.lineStart();\n  },\n  lineEnd: function() {\n    this._curve.lineEnd();\n  },\n  point: function(a, r) {\n    this._curve.point(r * Math.sin(a), r * -Math.cos(a));\n  }\n};\n\nfunction curveRadial(curve) {\n\n  function radial(context) {\n    return new Radial(curve(context));\n  }\n\n  radial._curve = curve;\n\n  return radial;\n}\n\nfunction radialLine(l) {\n  var c = l.curve;\n\n  l.angle = l.x, delete l.x;\n  l.radius = l.y, delete l.y;\n\n  l.curve = function(_) {\n    return arguments.length ? c(curveRadial(_)) : c()._curve;\n  };\n\n  return l;\n}\n\nvar radialLine$1 = function() {\n  return radialLine(line().curve(curveRadialLinear));\n};\n\nvar radialArea = function() {\n  var a = area().curve(curveRadialLinear),\n      c = a.curve,\n      x0 = a.lineX0,\n      x1 = a.lineX1,\n      y0 = a.lineY0,\n      y1 = a.lineY1;\n\n  a.angle = a.x, delete a.x;\n  a.startAngle = a.x0, delete a.x0;\n  a.endAngle = a.x1, delete a.x1;\n  a.radius = a.y, delete a.y;\n  a.innerRadius = a.y0, delete a.y0;\n  a.outerRadius = a.y1, delete a.y1;\n  a.lineStartAngle = function() { return radialLine(x0()); }, delete a.lineX0;\n  a.lineEndAngle = function() { return radialLine(x1()); }, delete a.lineX1;\n  a.lineInnerRadius = function() { return radialLine(y0()); }, delete a.lineY0;\n  a.lineOuterRadius = function() { return radialLine(y1()); }, delete a.lineY1;\n\n  a.curve = function(_) {\n    return arguments.length ? c(curveRadial(_)) : c()._curve;\n  };\n\n  return a;\n};\n\nvar slice = Array.prototype.slice;\n\nvar radialPoint = function(x, y) {\n  return [(y = +y) * Math.cos(x -= Math.PI / 2), y * Math.sin(x)];\n};\n\nfunction linkSource(d) {\n  return d.source;\n}\n\nfunction linkTarget(d) {\n  return d.target;\n}\n\nfunction link(curve) {\n  var source = linkSource,\n      target = linkTarget,\n      x$$1 = x,\n      y$$1 = y,\n      context = null;\n\n  function link() {\n    var buffer, argv = slice.call(arguments), s = source.apply(this, argv), t = target.apply(this, argv);\n    if (!context) context = buffer = d3Path.path();\n    curve(context, +x$$1.apply(this, (argv[0] = s, argv)), +y$$1.apply(this, argv), +x$$1.apply(this, (argv[0] = t, argv)), +y$$1.apply(this, argv));\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  link.source = function(_) {\n    return arguments.length ? (source = _, link) : source;\n  };\n\n  link.target = function(_) {\n    return arguments.length ? (target = _, link) : target;\n  };\n\n  link.x = function(_) {\n    return arguments.length ? (x$$1 = typeof _ === \"function\" ? _ : constant(+_), link) : x$$1;\n  };\n\n  link.y = function(_) {\n    return arguments.length ? (y$$1 = typeof _ === \"function\" ? _ : constant(+_), link) : y$$1;\n  };\n\n  link.context = function(_) {\n    return arguments.length ? ((context = _ == null ? null : _), link) : context;\n  };\n\n  return link;\n}\n\nfunction curveHorizontal(context, x0, y0, x1, y1) {\n  context.moveTo(x0, y0);\n  context.bezierCurveTo(x0 = (x0 + x1) / 2, y0, x0, y1, x1, y1);\n}\n\nfunction curveVertical(context, x0, y0, x1, y1) {\n  context.moveTo(x0, y0);\n  context.bezierCurveTo(x0, y0 = (y0 + y1) / 2, x1, y0, x1, y1);\n}\n\nfunction curveRadial$1(context, x0, y0, x1, y1) {\n  var p0 = radialPoint(x0, y0),\n      p1 = radialPoint(x0, y0 = (y0 + y1) / 2),\n      p2 = radialPoint(x1, y0),\n      p3 = radialPoint(x1, y1);\n  context.moveTo(p0[0], p0[1]);\n  context.bezierCurveTo(p1[0], p1[1], p2[0], p2[1], p3[0], p3[1]);\n}\n\nfunction linkHorizontal() {\n  return link(curveHorizontal);\n}\n\nfunction linkVertical() {\n  return link(curveVertical);\n}\n\nfunction linkRadial() {\n  var l = link(curveRadial$1);\n  l.angle = l.x, delete l.x;\n  l.radius = l.y, delete l.y;\n  return l;\n}\n\nvar circle = {\n  draw: function(context, size) {\n    var r = Math.sqrt(size / pi);\n    context.moveTo(r, 0);\n    context.arc(0, 0, r, 0, tau);\n  }\n};\n\nvar cross = {\n  draw: function(context, size) {\n    var r = Math.sqrt(size / 5) / 2;\n    context.moveTo(-3 * r, -r);\n    context.lineTo(-r, -r);\n    context.lineTo(-r, -3 * r);\n    context.lineTo(r, -3 * r);\n    context.lineTo(r, -r);\n    context.lineTo(3 * r, -r);\n    context.lineTo(3 * r, r);\n    context.lineTo(r, r);\n    context.lineTo(r, 3 * r);\n    context.lineTo(-r, 3 * r);\n    context.lineTo(-r, r);\n    context.lineTo(-3 * r, r);\n    context.closePath();\n  }\n};\n\nvar tan30 = Math.sqrt(1 / 3);\nvar tan30_2 = tan30 * 2;\n\nvar diamond = {\n  draw: function(context, size) {\n    var y = Math.sqrt(size / tan30_2),\n        x = y * tan30;\n    context.moveTo(0, -y);\n    context.lineTo(x, 0);\n    context.lineTo(0, y);\n    context.lineTo(-x, 0);\n    context.closePath();\n  }\n};\n\nvar ka = 0.89081309152928522810;\nvar kr = Math.sin(pi / 10) / Math.sin(7 * pi / 10);\nvar kx = Math.sin(tau / 10) * kr;\nvar ky = -Math.cos(tau / 10) * kr;\n\nvar star = {\n  draw: function(context, size) {\n    var r = Math.sqrt(size * ka),\n        x = kx * r,\n        y = ky * r;\n    context.moveTo(0, -r);\n    context.lineTo(x, y);\n    for (var i = 1; i < 5; ++i) {\n      var a = tau * i / 5,\n          c = Math.cos(a),\n          s = Math.sin(a);\n      context.lineTo(s * r, -c * r);\n      context.lineTo(c * x - s * y, s * x + c * y);\n    }\n    context.closePath();\n  }\n};\n\nvar square = {\n  draw: function(context, size) {\n    var w = Math.sqrt(size),\n        x = -w / 2;\n    context.rect(x, x, w, w);\n  }\n};\n\nvar sqrt3 = Math.sqrt(3);\n\nvar triangle = {\n  draw: function(context, size) {\n    var y = -Math.sqrt(size / (sqrt3 * 3));\n    context.moveTo(0, y * 2);\n    context.lineTo(-sqrt3 * y, -y);\n    context.lineTo(sqrt3 * y, -y);\n    context.closePath();\n  }\n};\n\nvar c = -0.5;\nvar s = Math.sqrt(3) / 2;\nvar k = 1 / Math.sqrt(12);\nvar a = (k / 2 + 1) * 3;\n\nvar wye = {\n  draw: function(context, size) {\n    var r = Math.sqrt(size / a),\n        x0 = r / 2,\n        y0 = r * k,\n        x1 = x0,\n        y1 = r * k + r,\n        x2 = -x1,\n        y2 = y1;\n    context.moveTo(x0, y0);\n    context.lineTo(x1, y1);\n    context.lineTo(x2, y2);\n    context.lineTo(c * x0 - s * y0, s * x0 + c * y0);\n    context.lineTo(c * x1 - s * y1, s * x1 + c * y1);\n    context.lineTo(c * x2 - s * y2, s * x2 + c * y2);\n    context.lineTo(c * x0 + s * y0, c * y0 - s * x0);\n    context.lineTo(c * x1 + s * y1, c * y1 - s * x1);\n    context.lineTo(c * x2 + s * y2, c * y2 - s * x2);\n    context.closePath();\n  }\n};\n\nvar symbols = [\n  circle,\n  cross,\n  diamond,\n  square,\n  star,\n  triangle,\n  wye\n];\n\nvar symbol = function() {\n  var type = constant(circle),\n      size = constant(64),\n      context = null;\n\n  function symbol() {\n    var buffer;\n    if (!context) context = buffer = d3Path.path();\n    type.apply(this, arguments).draw(context, +size.apply(this, arguments));\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  symbol.type = function(_) {\n    return arguments.length ? (type = typeof _ === \"function\" ? _ : constant(_), symbol) : type;\n  };\n\n  symbol.size = function(_) {\n    return arguments.length ? (size = typeof _ === \"function\" ? _ : constant(+_), symbol) : size;\n  };\n\n  symbol.context = function(_) {\n    return arguments.length ? (context = _ == null ? null : _, symbol) : context;\n  };\n\n  return symbol;\n};\n\nvar noop = function() {};\n\nfunction point(that, x, y) {\n  that._context.bezierCurveTo(\n    (2 * that._x0 + that._x1) / 3,\n    (2 * that._y0 + that._y1) / 3,\n    (that._x0 + 2 * that._x1) / 3,\n    (that._y0 + 2 * that._y1) / 3,\n    (that._x0 + 4 * that._x1 + x) / 6,\n    (that._y0 + 4 * that._y1 + y) / 6\n  );\n}\n\nfunction Basis(context) {\n  this._context = context;\n}\n\nBasis.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 3: point(this, this._x1, this._y1); // proceed\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._context.lineTo((5 * this._x0 + this._x1) / 6, (5 * this._y0 + this._y1) / 6); // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nvar basis = function(context) {\n  return new Basis(context);\n};\n\nfunction BasisClosed(context) {\n  this._context = context;\n}\n\nBasisClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x2, this._y2);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.moveTo((this._x2 + 2 * this._x3) / 3, (this._y2 + 2 * this._y3) / 3);\n        this._context.lineTo((this._x3 + 2 * this._x2) / 3, (this._y3 + 2 * this._y2) / 3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x2, this._y2);\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._x2 = x, this._y2 = y; break;\n      case 1: this._point = 2; this._x3 = x, this._y3 = y; break;\n      case 2: this._point = 3; this._x4 = x, this._y4 = y; this._context.moveTo((this._x0 + 4 * this._x1 + x) / 6, (this._y0 + 4 * this._y1 + y) / 6); break;\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nvar basisClosed = function(context) {\n  return new BasisClosed(context);\n};\n\nfunction BasisOpen(context) {\n  this._context = context;\n}\n\nBasisOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; var x0 = (this._x0 + 4 * this._x1 + x) / 6, y0 = (this._y0 + 4 * this._y1 + y) / 6; this._line ? this._context.lineTo(x0, y0) : this._context.moveTo(x0, y0); break;\n      case 3: this._point = 4; // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nvar basisOpen = function(context) {\n  return new BasisOpen(context);\n};\n\nfunction Bundle(context, beta) {\n  this._basis = new Basis(context);\n  this._beta = beta;\n}\n\nBundle.prototype = {\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n    this._basis.lineStart();\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        j = x.length - 1;\n\n    if (j > 0) {\n      var x0 = x[0],\n          y0 = y[0],\n          dx = x[j] - x0,\n          dy = y[j] - y0,\n          i = -1,\n          t;\n\n      while (++i <= j) {\n        t = i / j;\n        this._basis.point(\n          this._beta * x[i] + (1 - this._beta) * (x0 + t * dx),\n          this._beta * y[i] + (1 - this._beta) * (y0 + t * dy)\n        );\n      }\n    }\n\n    this._x = this._y = null;\n    this._basis.lineEnd();\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\nvar bundle = ((function custom(beta) {\n\n  function bundle(context) {\n    return beta === 1 ? new Basis(context) : new Bundle(context, beta);\n  }\n\n  bundle.beta = function(beta) {\n    return custom(+beta);\n  };\n\n  return bundle;\n}))(0.85);\n\nfunction point$1(that, x, y) {\n  that._context.bezierCurveTo(\n    that._x1 + that._k * (that._x2 - that._x0),\n    that._y1 + that._k * (that._y2 - that._y0),\n    that._x2 + that._k * (that._x1 - x),\n    that._y2 + that._k * (that._y1 - y),\n    that._x2,\n    that._y2\n  );\n}\n\nfunction Cardinal(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinal.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: point$1(this, this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; this._x1 = x, this._y1 = y; break;\n      case 2: this._point = 3; // proceed\n      default: point$1(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nvar cardinal = ((function custom(tension) {\n\n  function cardinal(context) {\n    return new Cardinal(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n}))(0);\n\nfunction CardinalClosed(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinalClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.lineTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        this.point(this._x5, this._y5);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;\n      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;\n      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;\n      default: point$1(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nvar cardinalClosed = ((function custom(tension) {\n\n  function cardinal(context) {\n    return new CardinalClosed(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n}))(0);\n\nfunction CardinalOpen(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinalOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;\n      case 3: this._point = 4; // proceed\n      default: point$1(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nvar cardinalOpen = ((function custom(tension) {\n\n  function cardinal(context) {\n    return new CardinalOpen(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n}))(0);\n\nfunction point$2(that, x, y) {\n  var x1 = that._x1,\n      y1 = that._y1,\n      x2 = that._x2,\n      y2 = that._y2;\n\n  if (that._l01_a > epsilon) {\n    var a = 2 * that._l01_2a + 3 * that._l01_a * that._l12_a + that._l12_2a,\n        n = 3 * that._l01_a * (that._l01_a + that._l12_a);\n    x1 = (x1 * a - that._x0 * that._l12_2a + that._x2 * that._l01_2a) / n;\n    y1 = (y1 * a - that._y0 * that._l12_2a + that._y2 * that._l01_2a) / n;\n  }\n\n  if (that._l23_a > epsilon) {\n    var b = 2 * that._l23_2a + 3 * that._l23_a * that._l12_a + that._l12_2a,\n        m = 3 * that._l23_a * (that._l23_a + that._l12_a);\n    x2 = (x2 * b + that._x1 * that._l23_2a - x * that._l12_2a) / m;\n    y2 = (y2 * b + that._y1 * that._l23_2a - y * that._l12_2a) / m;\n  }\n\n  that._context.bezierCurveTo(x1, y1, x2, y2, that._x2, that._y2);\n}\n\nfunction CatmullRom(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRom.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: this.point(this._x2, this._y2); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; // proceed\n      default: point$2(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nvar catmullRom = ((function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRom(context, alpha) : new Cardinal(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n}))(0.5);\n\nfunction CatmullRomClosed(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRomClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.lineTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        this.point(this._x5, this._y5);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;\n      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;\n      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;\n      default: point$2(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nvar catmullRomClosed = ((function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRomClosed(context, alpha) : new CardinalClosed(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n}))(0.5);\n\nfunction CatmullRomOpen(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRomOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;\n      case 3: this._point = 4; // proceed\n      default: point$2(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nvar catmullRomOpen = ((function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRomOpen(context, alpha) : new CardinalOpen(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n}))(0.5);\n\nfunction LinearClosed(context) {\n  this._context = context;\n}\n\nLinearClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._point) this._context.closePath();\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    if (this._point) this._context.lineTo(x, y);\n    else this._point = 1, this._context.moveTo(x, y);\n  }\n};\n\nvar linearClosed = function(context) {\n  return new LinearClosed(context);\n};\n\nfunction sign(x) {\n  return x < 0 ? -1 : 1;\n}\n\n// Calculate the slopes of the tangents (Hermite-type interpolation) based on\n// the following paper: Steffen, M. 1990. A Simple Method for Monotonic\n// Interpolation in One Dimension. Astronomy and Astrophysics, Vol. 239, NO.\n// NOV(II), P. 443, 1990.\nfunction slope3(that, x2, y2) {\n  var h0 = that._x1 - that._x0,\n      h1 = x2 - that._x1,\n      s0 = (that._y1 - that._y0) / (h0 || h1 < 0 && -0),\n      s1 = (y2 - that._y1) / (h1 || h0 < 0 && -0),\n      p = (s0 * h1 + s1 * h0) / (h0 + h1);\n  return (sign(s0) + sign(s1)) * Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0;\n}\n\n// Calculate a one-sided slope.\nfunction slope2(that, t) {\n  var h = that._x1 - that._x0;\n  return h ? (3 * (that._y1 - that._y0) / h - t) / 2 : t;\n}\n\n// According to https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Representations\n// \"you can express cubic Hermite interpolation in terms of cubic Bézier curves\n// with respect to the four values p0, p0 + m0 / 3, p1 - m1 / 3, p1\".\nfunction point$3(that, t0, t1) {\n  var x0 = that._x0,\n      y0 = that._y0,\n      x1 = that._x1,\n      y1 = that._y1,\n      dx = (x1 - x0) / 3;\n  that._context.bezierCurveTo(x0 + dx, y0 + dx * t0, x1 - dx, y1 - dx * t1, x1, y1);\n}\n\nfunction MonotoneX(context) {\n  this._context = context;\n}\n\nMonotoneX.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 =\n    this._t0 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n      case 3: point$3(this, this._t0, slope2(this, this._t0)); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    var t1 = NaN;\n\n    x = +x, y = +y;\n    if (x === this._x1 && y === this._y1) return; // Ignore coincident points.\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; point$3(this, slope2(this, t1 = slope3(this, x, y)), t1); break;\n      default: point$3(this, this._t0, t1 = slope3(this, x, y)); break;\n    }\n\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n    this._t0 = t1;\n  }\n};\n\nfunction MonotoneY(context) {\n  this._context = new ReflectContext(context);\n}\n\n(MonotoneY.prototype = Object.create(MonotoneX.prototype)).point = function(x, y) {\n  MonotoneX.prototype.point.call(this, y, x);\n};\n\nfunction ReflectContext(context) {\n  this._context = context;\n}\n\nReflectContext.prototype = {\n  moveTo: function(x, y) { this._context.moveTo(y, x); },\n  closePath: function() { this._context.closePath(); },\n  lineTo: function(x, y) { this._context.lineTo(y, x); },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) { this._context.bezierCurveTo(y1, x1, y2, x2, y, x); }\n};\n\nfunction monotoneX(context) {\n  return new MonotoneX(context);\n}\n\nfunction monotoneY(context) {\n  return new MonotoneY(context);\n}\n\nfunction Natural(context) {\n  this._context = context;\n}\n\nNatural.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        n = x.length;\n\n    if (n) {\n      this._line ? this._context.lineTo(x[0], y[0]) : this._context.moveTo(x[0], y[0]);\n      if (n === 2) {\n        this._context.lineTo(x[1], y[1]);\n      } else {\n        var px = controlPoints(x),\n            py = controlPoints(y);\n        for (var i0 = 0, i1 = 1; i1 < n; ++i0, ++i1) {\n          this._context.bezierCurveTo(px[0][i0], py[0][i0], px[1][i0], py[1][i0], x[i1], y[i1]);\n        }\n      }\n    }\n\n    if (this._line || (this._line !== 0 && n === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n    this._x = this._y = null;\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\n// See https://www.particleincell.com/2012/bezier-splines/ for derivation.\nfunction controlPoints(x) {\n  var i,\n      n = x.length - 1,\n      m,\n      a = new Array(n),\n      b = new Array(n),\n      r = new Array(n);\n  a[0] = 0, b[0] = 2, r[0] = x[0] + 2 * x[1];\n  for (i = 1; i < n - 1; ++i) a[i] = 1, b[i] = 4, r[i] = 4 * x[i] + 2 * x[i + 1];\n  a[n - 1] = 2, b[n - 1] = 7, r[n - 1] = 8 * x[n - 1] + x[n];\n  for (i = 1; i < n; ++i) m = a[i] / b[i - 1], b[i] -= m, r[i] -= m * r[i - 1];\n  a[n - 1] = r[n - 1] / b[n - 1];\n  for (i = n - 2; i >= 0; --i) a[i] = (r[i] - a[i + 1]) / b[i];\n  b[n - 1] = (x[n] + a[n - 1]) / 2;\n  for (i = 0; i < n - 1; ++i) b[i] = 2 * x[i + 1] - a[i + 1];\n  return [a, b];\n}\n\nvar natural = function(context) {\n  return new Natural(context);\n};\n\nfunction Step(context, t) {\n  this._context = context;\n  this._t = t;\n}\n\nStep.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = this._y = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (0 < this._t && this._t < 1 && this._point === 2) this._context.lineTo(this._x, this._y);\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    if (this._line >= 0) this._t = 1 - this._t, this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // proceed\n      default: {\n        if (this._t <= 0) {\n          this._context.lineTo(this._x, y);\n          this._context.lineTo(x, y);\n        } else {\n          var x1 = this._x * (1 - this._t) + x * this._t;\n          this._context.lineTo(x1, this._y);\n          this._context.lineTo(x1, y);\n        }\n        break;\n      }\n    }\n    this._x = x, this._y = y;\n  }\n};\n\nvar step = function(context) {\n  return new Step(context, 0.5);\n};\n\nfunction stepBefore(context) {\n  return new Step(context, 0);\n}\n\nfunction stepAfter(context) {\n  return new Step(context, 1);\n}\n\nvar none = function(series, order) {\n  if (!((n = series.length) > 1)) return;\n  for (var i = 1, j, s0, s1 = series[order[0]], n, m = s1.length; i < n; ++i) {\n    s0 = s1, s1 = series[order[i]];\n    for (j = 0; j < m; ++j) {\n      s1[j][1] += s1[j][0] = isNaN(s0[j][1]) ? s0[j][0] : s0[j][1];\n    }\n  }\n};\n\nvar none$1 = function(series) {\n  var n = series.length, o = new Array(n);\n  while (--n >= 0) o[n] = n;\n  return o;\n};\n\nfunction stackValue(d, key) {\n  return d[key];\n}\n\nvar stack = function() {\n  var keys = constant([]),\n      order = none$1,\n      offset = none,\n      value = stackValue;\n\n  function stack(data) {\n    var kz = keys.apply(this, arguments),\n        i,\n        m = data.length,\n        n = kz.length,\n        sz = new Array(n),\n        oz;\n\n    for (i = 0; i < n; ++i) {\n      for (var ki = kz[i], si = sz[i] = new Array(m), j = 0, sij; j < m; ++j) {\n        si[j] = sij = [0, +value(data[j], ki, j, data)];\n        sij.data = data[j];\n      }\n      si.key = ki;\n    }\n\n    for (i = 0, oz = order(sz); i < n; ++i) {\n      sz[oz[i]].index = i;\n    }\n\n    offset(sz, oz);\n    return sz;\n  }\n\n  stack.keys = function(_) {\n    return arguments.length ? (keys = typeof _ === \"function\" ? _ : constant(slice.call(_)), stack) : keys;\n  };\n\n  stack.value = function(_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), stack) : value;\n  };\n\n  stack.order = function(_) {\n    return arguments.length ? (order = _ == null ? none$1 : typeof _ === \"function\" ? _ : constant(slice.call(_)), stack) : order;\n  };\n\n  stack.offset = function(_) {\n    return arguments.length ? (offset = _ == null ? none : _, stack) : offset;\n  };\n\n  return stack;\n};\n\nvar expand = function(series, order) {\n  if (!((n = series.length) > 0)) return;\n  for (var i, n, j = 0, m = series[0].length, y; j < m; ++j) {\n    for (y = i = 0; i < n; ++i) y += series[i][j][1] || 0;\n    if (y) for (i = 0; i < n; ++i) series[i][j][1] /= y;\n  }\n  none(series, order);\n};\n\nvar diverging = function(series, order) {\n  if (!((n = series.length) > 1)) return;\n  for (var i, j = 0, d, dy, yp, yn, n, m = series[order[0]].length; j < m; ++j) {\n    for (yp = yn = 0, i = 0; i < n; ++i) {\n      if ((dy = (d = series[order[i]][j])[1] - d[0]) >= 0) {\n        d[0] = yp, d[1] = yp += dy;\n      } else if (dy < 0) {\n        d[1] = yn, d[0] = yn += dy;\n      } else {\n        d[0] = yp;\n      }\n    }\n  }\n};\n\nvar silhouette = function(series, order) {\n  if (!((n = series.length) > 0)) return;\n  for (var j = 0, s0 = series[order[0]], n, m = s0.length; j < m; ++j) {\n    for (var i = 0, y = 0; i < n; ++i) y += series[i][j][1] || 0;\n    s0[j][1] += s0[j][0] = -y / 2;\n  }\n  none(series, order);\n};\n\nvar wiggle = function(series, order) {\n  if (!((n = series.length) > 0) || !((m = (s0 = series[order[0]]).length) > 0)) return;\n  for (var y = 0, j = 1, s0, m, n; j < m; ++j) {\n    for (var i = 0, s1 = 0, s2 = 0; i < n; ++i) {\n      var si = series[order[i]],\n          sij0 = si[j][1] || 0,\n          sij1 = si[j - 1][1] || 0,\n          s3 = (sij0 - sij1) / 2;\n      for (var k = 0; k < i; ++k) {\n        var sk = series[order[k]],\n            skj0 = sk[j][1] || 0,\n            skj1 = sk[j - 1][1] || 0;\n        s3 += skj0 - skj1;\n      }\n      s1 += sij0, s2 += s3 * sij0;\n    }\n    s0[j - 1][1] += s0[j - 1][0] = y;\n    if (s1) y -= s2 / s1;\n  }\n  s0[j - 1][1] += s0[j - 1][0] = y;\n  none(series, order);\n};\n\nvar ascending = function(series) {\n  var sums = series.map(sum);\n  return none$1(series).sort(function(a, b) { return sums[a] - sums[b]; });\n};\n\nfunction sum(series) {\n  var s = 0, i = -1, n = series.length, v;\n  while (++i < n) if (v = +series[i][1]) s += v;\n  return s;\n}\n\nvar descending$1 = function(series) {\n  return ascending(series).reverse();\n};\n\nvar insideOut = function(series) {\n  var n = series.length,\n      i,\n      j,\n      sums = series.map(sum),\n      order = none$1(series).sort(function(a, b) { return sums[b] - sums[a]; }),\n      top = 0,\n      bottom = 0,\n      tops = [],\n      bottoms = [];\n\n  for (i = 0; i < n; ++i) {\n    j = order[i];\n    if (top < bottom) {\n      top += sums[j];\n      tops.push(j);\n    } else {\n      bottom += sums[j];\n      bottoms.push(j);\n    }\n  }\n\n  return bottoms.reverse().concat(tops);\n};\n\nvar reverse = function(series) {\n  return none$1(series).reverse();\n};\n\nexports.arc = arc;\nexports.area = area;\nexports.line = line;\nexports.pie = pie;\nexports.radialArea = radialArea;\nexports.radialLine = radialLine$1;\nexports.linkHorizontal = linkHorizontal;\nexports.linkVertical = linkVertical;\nexports.linkRadial = linkRadial;\nexports.symbol = symbol;\nexports.symbols = symbols;\nexports.symbolCircle = circle;\nexports.symbolCross = cross;\nexports.symbolDiamond = diamond;\nexports.symbolSquare = square;\nexports.symbolStar = star;\nexports.symbolTriangle = triangle;\nexports.symbolWye = wye;\nexports.curveBasisClosed = basisClosed;\nexports.curveBasisOpen = basisOpen;\nexports.curveBasis = basis;\nexports.curveBundle = bundle;\nexports.curveCardinalClosed = cardinalClosed;\nexports.curveCardinalOpen = cardinalOpen;\nexports.curveCardinal = cardinal;\nexports.curveCatmullRomClosed = catmullRomClosed;\nexports.curveCatmullRomOpen = catmullRomOpen;\nexports.curveCatmullRom = catmullRom;\nexports.curveLinearClosed = linearClosed;\nexports.curveLinear = curveLinear;\nexports.curveMonotoneX = monotoneX;\nexports.curveMonotoneY = monotoneY;\nexports.curveNatural = natural;\nexports.curveStep = step;\nexports.curveStepAfter = stepAfter;\nexports.curveStepBefore = stepBefore;\nexports.stack = stack;\nexports.stackOffsetExpand = expand;\nexports.stackOffsetDiverging = diverging;\nexports.stackOffsetNone = none;\nexports.stackOffsetSilhouette = silhouette;\nexports.stackOffsetWiggle = wiggle;\nexports.stackOrderAscending = ascending;\nexports.stackOrderDescending = descending$1;\nexports.stackOrderInsideOut = insideOut;\nexports.stackOrderNone = none$1;\nexports.stackOrderReverse = reverse;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.1.1.1@d3-shape/build/d3-shape.js\n// module id = 32\n// module chunks = 1 2 3 4 5","// https://d3js.org/d3-path/ Version 1.0.5. Copyright 2017 Mike Bostock.\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(factory((global.d3 = global.d3 || {})));\n}(this, (function (exports) { 'use strict';\n\nvar pi = Math.PI;\nvar tau = 2 * pi;\nvar epsilon = 1e-6;\nvar tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path;\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function(x1, y1, x, y) {\n    this._ += \"Q\" + (+x1) + \",\" + (+y1) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + (+x1) + \",\" + (+y1) + \",\" + (+x2) + \",\" + (+y2) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon)) {}\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      var x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n      }\n\n      this._ += \"A\" + r + \",\" + r + \",0,0,\" + (+(y01 * x20 > x01 * y20)) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n    }\n  },\n  arc: function(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._ += \"L\" + x0 + \",\" + y0;\n    }\n\n    // Is this arc empty? We’re done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,\" + (+(da >= pi)) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n    }\n  },\n  rect: function(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + (+w) + \"v\" + (+h) + \"h\" + (-w) + \"Z\";\n  },\n  toString: function() {\n    return this._;\n  }\n};\n\nexports.path = path;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.1.0.5@d3-path/build/d3-path.js\n// module id = 33\n// module chunks = 1 2 3 4 5","define(function(require){\n    'use strict';\n\n    const d3Dispatch = require('d3-dispatch');\n    const d3Ease = require('d3-ease');\n    const d3Interpolate = require('d3-interpolate');\n    const d3Scale = require('d3-scale');\n    const d3Shape = require('d3-shape');\n    const d3Selection = require('d3-selection');\n    const d3Transition = require('d3-transition');\n\n    const {exportChart} = require('./helpers/exportChart');\n    const textHelper = require('./helpers/text');\n    const colorHelper = require('./helpers/colors');\n\n\n    /**\n     * @typedef DonutChartData\n     * @type {Object[]}\n     * @property {Number} quantity     Quantity of the group (required)\n     * @property {Number} percentage   Percentage of the total (required)\n     * @property {String} name         Name of the group (required)\n     * @property {Number} id           Identifier for the group required for legend feature (optional)\n     *\n     * @example\n     * [\n     *     {\n     *         quantity: 1,\n     *         percentage: 50,\n     *         name: 'glittering',\n     *         id: 1\n     *     },\n     *     {\n     *         quantity: 1,\n     *         percentage: 50,\n     *         name: 'luminous',\n     *         id: 2\n     *     }\n     * ]\n     */\n\n    /**\n     * Reusable Donut Chart API class that renders a\n     * simple and configurable donut chart.\n     *\n     * @module Donut\n     * @tutorial donut\n     * @requires d3-dispatch, d3-ease, d3-interpolate, d3-scale, d3-shape, d3-selection\n     *\n     * @example\n     * var donutChart = donut();\n     *\n     * donutChart\n     *     .externalRadius(500)\n     *     .internalRadius(200);\n     *\n     * d3Selection.select('.css-selector')\n     *     .datum(dataset)\n     *     .call(donutChart);\n     *\n     */\n    return function module() {\n\n        let margin = {\n                top: 0,\n                right: 0,\n                bottom: 0,\n                left: 0\n            },\n            width = 300,\n            height = 300,\n            ease = d3Ease.easeCubicInOut,\n            arcTransitionDuration = 750,\n            pieDrawingTransitionDuration = 1200,\n            pieHoverTransitionDuration = 150,\n            radiusHoverOffset = 12,\n            paddingAngle = 0.016,\n            data,\n            chartWidth, chartHeight,\n            externalRadius = 140,\n            internalRadius = 45.5,\n            legendWidth = externalRadius + internalRadius,\n            layout,\n            shape,\n            slices,\n            svg,\n\n            isAnimated = false,\n            quantityLabel = 'quantity',\n            nameLabel = 'name',\n            percentageLabel = 'percentage',\n\n            // colors\n            colorScale,\n            colorSchema = colorHelper.colorSchemas.britechartsColorSchema,\n\n            // utils\n            storeAngle = function(d) {\n                this._current = d;\n            },\n            reduceOuterRadius = d => {\n                d.outerRadius = externalRadius - radiusHoverOffset;\n            },\n            sortComparator = (a, b) => b.quantity - a.quantity,\n\n            // extractors\n            getQuantity = ({quantity}) => quantity,\n            getSliceFill = ({data}) => colorScale(data.name),\n\n            // events\n            dispatcher = d3Dispatch.dispatch('customMouseOver', 'customMouseOut', 'customMouseMove');\n\n        /**\n         * This function creates the graph using the selection as container\n         *\n         * @param {D3Selection} _selection A d3 selection that represents\n         *                                  the container(s) where the chart(s) will be rendered\n         * @param {DonutChartData} _data The data to attach and generate the chart\n         */\n        function exports(_selection) {\n            _selection.each(function(_data) {\n                chartWidth = width - margin.left - margin.right;\n                chartHeight = height - margin.top - margin.bottom;\n                data = cleanData(_data);\n\n                buildLayout();\n                buildColorScale();\n                buildShape();\n                buildSVG(this);\n                drawSlices();\n                initTooltip();\n            });\n        }\n\n        /**\n         * Builds color scale for chart, if any colorSchema was defined\n         * @private\n         */\n        function buildColorScale() {\n            if (colorSchema) {\n                colorScale = d3Scale.scaleOrdinal().range(colorSchema);\n            }\n        }\n\n        /**\n         * Builds containers for the chart, the legend and a wrapper for all of them\n         * @private\n         */\n        function buildContainerGroups() {\n            let container = svg\n              .append('g')\n                .classed('container-group', true)\n                .attr('transform', `translate(${width / 2}, ${height / 2})`);\n\n            container.append('g').classed('chart-group', true);\n            container.append('g').classed('legend-group', true);\n        }\n\n        /**\n         * Builds the pie layout that will produce data ready to draw\n         * @private\n         */\n        function buildLayout() {\n            layout = d3Shape.pie()\n                .padAngle(paddingAngle)\n                .value(getQuantity)\n                .sort(sortComparator);\n        }\n\n        /**\n         * Builds the shape function\n         * @private\n         */\n        function buildShape() {\n            shape = d3Shape.arc()\n                .innerRadius(internalRadius)\n                .padRadius(externalRadius);\n        }\n\n        /**\n         * Builds the SVG element that will contain the chart\n         *\n         * @param  {HTMLElement} container DOM element that will work as the container of the graph\n         * @private\n         */\n        function buildSVG(container) {\n            if (!svg) {\n                svg = d3Selection.select(container)\n                  .append('svg')\n                    .classed('britechart donut-chart', true)\n                    .data([data]);  //TO REVIEW\n\n                buildContainerGroups();\n            }\n\n            svg\n                .attr('width', width)\n                .attr('height', height);\n        }\n\n        /**\n         * Cleaning data adding the proper format\n         * @param  {DonutChartData} data Data\n         * @private\n         */\n        function cleanData(data) {\n            return data.map((d) => {\n                d.quantity = +d[quantityLabel];\n                d.name = String(d[nameLabel]);\n                d.percentage = String(d[percentageLabel]);\n\n                return d;\n            });\n        }\n\n        /**\n         * Draws the values on the donut slice inside the text element\n         *\n         * @param  {Object} obj Data object\n         * @private\n         */\n        function drawLegend(obj) {\n            if (obj.data) {\n                svg.select('.donut-text')\n                    .text(() => `${obj.data.percentage}% ${ obj.data.name}`)\n                    .attr('dy', '.2em')\n                    .attr('text-anchor', 'middle');\n\n                svg.select('.donut-text').call(wrapText, legendWidth);\n            }\n        }\n\n        /**\n         * Draws the slices of the donut\n         * @private\n         */\n        function drawSlices() {\n            if (!slices) {\n                slices = svg.select('.chart-group')\n                    .selectAll('g.arc')\n                    .data(layout(data));\n\n                let newSlices = slices.enter()\n                      .append('g')\n                        .each(storeAngle)\n                        .each(reduceOuterRadius)\n                        .classed('arc', true)\n                        .on('mouseover', handleMouseOver)\n                        .on('mouseout', handleMouseOut);\n\n                if (isAnimated) {\n                    newSlices.merge(slices)\n                      .append('path')\n                        .attr('fill', getSliceFill)\n                        .on('mouseover', tweenGrowthFactory(externalRadius, 0))\n                        .on('mouseout', tweenGrowthFactory(externalRadius - radiusHoverOffset, pieHoverTransitionDuration))\n                        .transition()\n                        .ease(ease)\n                        .duration(pieDrawingTransitionDuration)\n                        .attrTween('d', tweenLoading);\n                } else {\n                    newSlices.merge(slices)\n                      .append('path')\n                        .attr('fill', getSliceFill)\n                        .attr('d', shape)\n                        .on('mouseover', tweenGrowthFactory(externalRadius, 0))\n                        .on('mouseout', tweenGrowthFactory(externalRadius - radiusHoverOffset, pieHoverTransitionDuration));\n                }\n            } else {\n                slices = svg.select('.chart-group')\n                    .selectAll('path')\n                    .data(layout(data));\n\n                slices\n                    .attr('d', shape);\n\n                // Redraws the angles of the data\n                slices\n                    .transition()\n                    .duration(arcTransitionDuration)\n                    .attrTween('d', tweenArc);\n            }\n        }\n\n        /**\n         * Cleans any value that could be on the legend text element\n         * @private\n         */\n        function cleanLegend() {\n            svg.select('.donut-text').text('');\n        }\n\n        function handleMouseOver(datum) {\n            drawLegend(datum);\n\n            dispatcher.call('customMouseOver', this, datum);\n        }\n\n        function handleMouseOut() {\n            cleanLegend();\n\n            dispatcher.call('customMouseOut', this);\n        }\n\n        /**\n         * Creates the text element that will hold the legend of the chart\n         */\n        function initTooltip() {\n            svg.select('.legend-group')\n                .append('text')\n                .attr('class', 'donut-text');\n        }\n\n        /**\n         * Stores current angles and interpolates with new angles\n         * Check out {@link http://bl.ocks.org/mbostock/1346410| this example}\n         *\n         * @param  {Object}     a   New data for slice\n         * @return {Function}       Tweening function for the donut shape\n         * @private\n         */\n        function tweenArc(a) {\n            let i = d3Interpolate.interpolate(this._current, a);\n\n            this._current = i(0);\n\n            return function(t) {\n                return shape(i(t));\n            };\n        }\n\n        /**\n         * Generates animations with tweens depending on the attributes given\n         *\n         * @param  {Number} outerRadius Final outer radius value\n         * @param  {Number} delay       Delay of animation\n         * @return {Function}           Function that when called will tween the element\n         * @private\n         */\n        function tweenGrowthFactory(outerRadius, delay) {\n            return function() {\n                d3Selection.select(this)\n                    .transition()\n                    .delay(delay)\n                    .attrTween('d', function(d) {\n                        let i = d3Interpolate.interpolate(d.outerRadius, outerRadius);\n\n                        return (t) => {\n                            d.outerRadius = i(t);\n\n                            return shape(d);\n                        };\n                    });\n            };\n        }\n\n        /**\n         * Animation for chart loading\n         * Check out {@link http://bl.ocks.org/mbostock/4341574| this example}\n         *\n         * @param  {Object} b Data point\n         * @return {Function}   Tween function\n         * @private\n         */\n        function tweenLoading(b) {\n            let i;\n\n            b.innerRadius = 0;\n            i = d3Interpolate.interpolate({ startAngle: 0, endAngle: 0}, b);\n\n            return function(t) { return shape(i(t)); };\n        }\n\n        /**\n         * Utility function that wraps a text into the given width\n         *\n         * @param  {D3Selection} text         Text to write\n         * @param  {Number} legendWidth Width of the container\n         * @private\n         */\n        function wrapText(text, legendWidth) {\n            let fontSize = externalRadius / 5;\n\n            textHelper.wrapText.call(null, 0, fontSize, legendWidth, text.node());\n        }\n\n        /**\n         * Gets or Sets the colorSchema of the chart\n         * @param  {String[]} _x Desired colorSchema for the graph\n         * @return { colorSchema | module} Current colorSchema or Chart module to chain calls\n         * @public\n         */\n        exports.colorSchema = function(_x) {\n            if (!arguments.length) {\n                return colorSchema;\n            }\n            colorSchema = _x;\n            return this;\n        };\n\n        /**\n         * Gets or Sets the externalRadius of the chart\n         * @param  {Number} _x ExternalRadius number to get/set\n         * @return { (Number | Module) } Current externalRadius or Donut Chart module to chain calls\n         * @public\n         */\n        exports.externalRadius = function(_x) {\n            if (!arguments.length) {\n                return externalRadius;\n            }\n            externalRadius = _x;\n            return this;\n        };\n\n        /**\n         * Gets or Sets the height of the chart\n         * @param  {Number} _x Desired width for the graph\n         * @return { (Number | Module) } Current height or Donut Chart module to chain calls\n         * @public\n         */\n        exports.height = function(_x) {\n            if (!arguments.length) {\n                return height;\n            }\n            height = _x;\n            return this;\n        };\n\n        /**\n         * Gets or Sets the isAnimated property of the chart, making it to animate when render.\n         * By default this is 'false'\n         *\n         * @param  {Boolean} _x Desired animation flag\n         * @return { isAnimated | module} Current isAnimated flag or Chart module\n         * @public\n         */\n        exports.isAnimated = function(_x) {\n            if (!arguments.length) {\n                return isAnimated;\n            }\n            isAnimated = _x;\n\n            return this;\n        };\n\n        /**\n         * Gets or Sets the internalRadius of the chart\n         * @param  {Number} _x InternalRadius number to get/set\n         * @return { (Number | Module) } Current internalRadius or Donut Chart module to chain calls\n         * @public\n         */\n        exports.internalRadius = function(_x) {\n            if (!arguments.length) {\n                return internalRadius;\n            }\n            internalRadius = _x;\n            return this;\n        };\n\n        /**\n         * Gets or Sets the margin of the chart\n         * @param  {Object} _x Margin object to get/set\n         * @return { (Number | Module) } Current margin or Donut Chart module to chain calls\n         * @public\n         */\n        exports.margin = function(_x) {\n            if (!arguments.length) {\n                return margin;\n            }\n            margin = _x;\n            return this;\n        };\n\n        /**\n         * Gets or Sets the width of the chart\n         * @param  {Number} _x Desired width for the graph\n         * @return { (Number | Module) } Current width or Donut Chart module to chain calls\n         * @public\n         */\n        exports.width = function(_x) {\n            if (!arguments.length) {\n                return width;\n            }\n            width = _x;\n            return this;\n        };\n\n        /**\n         * Chart exported to png and a download action is fired\n         * @public\n         */\n        exports.exportChart = function(filename, title) {\n            exportChart.call(exports, svg, filename, title);\n        };\n\n        /**\n         * Exposes an 'on' method that acts as a bridge with the event dispatcher\n         * We are going to expose this events:\n         * customMouseOver, customMouseMove and customMouseOut\n         *\n         * @return {module} Bar Chart\n         * @public\n         */\n        exports.on = function() {\n            let value = dispatcher.on.apply(dispatcher, arguments);\n\n            return value === dispatcher ? exports : value;\n        };\n\n        return exports;\n    };\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/charts/donut.js","define(function(require){\n    'use strict';\n\n    const d3Format = require('d3-format');\n    const d3Scale = require('d3-scale');\n    const d3Selection = require('d3-selection');\n    const d3Transition = require('d3-transition');\n\n    const textHelper = require('./helpers/text');\n    const colorHelper = require('./helpers/colors');\n\n    /**\n     * @typedef LegendChartData\n     * @type {Object[]}\n     * @property {Number} id        Id of the group (required)\n     * @property {Number} quantity  Quantity of the group (required)\n     * @property {String} name      Name of the group (required)\n     *\n     * @example\n     * [\n     *     {\n     *         id: 1,\n     *         quantity: 2,\n     *         name: 'glittering'\n     *     },\n     *     {\n     *         id: 2,\n     *         quantity: 3,\n     *         name: 'luminous'\n     *     }\n     */\n\n\n    /**\n     * @fileOverview Legend Component reusable API class that renders a\n     * simple and configurable legend element.\n     *\n     * @example\n     * var donutChart = donut(),\n     *     legendBox = legend();\n     *\n     * donutChart\n     *     .externalRadius(500)\n     *     .internalRadius(200)\n     *     .on('customMouseOver', function(data) {\n     *         legendBox.highlight(data.data.id);\n     *     })\n     *     .on('customMouseOut', function() {\n     *         legendBox.clearHighlight();\n     *     });\n     *\n     * d3Selection.select('.css-selector')\n     *     .datum(dataset)\n     *     .call(donutChart);\n     *\n     * d3Selection.select('.other-css-selector')\n     *     .datum(dataset)\n     *     .call(legendBox);\n     *\n     * @module Legend\n     * @tutorial legend\n     * @exports charts/legend\n     * @requires d3\n     */\n    return function module() {\n\n        let margin = {\n                top: 5,\n                right: 5,\n                bottom: 5,\n                left: 5\n            },\n            width = 320,\n            height = 180,\n\n            textSize = 12,\n            textLetterSpacing = 0.5,\n\n            markerSize = 16,\n            markerYOffset = - (textSize - 2) / 2,\n            marginRatio = 1.5,\n\n            valueReservedSpace = 40,\n            numberLetterSpacing = 0.8,\n            numberFormat = d3Format.format('s'),\n\n            isFadedClassName = 'is-faded',\n            horizontal = false,\n\n            // colors\n            colorScale,\n            colorSchema = colorHelper.colorSchemas.britechartsColorSchema,\n\n            getId = ({id}) => id,\n            getName = ({name}) => name,\n            getFormattedQuantity = ({quantity}) => numberFormat(quantity),\n            getCircleFill = ({name}) => colorScale(name),\n\n            entries,\n            chartWidth, chartHeight,\n            data,\n            svg;\n\n\n        /**\n         * This function creates the graph using the selection as container\n         * @param  {D3Selection} _selection A d3 selection that represents\n         *                                  the container(s) where the chart(s) will be rendered\n         * @param {object} _data The data to attach and generate the chart\n         */\n        function exports(_selection) {\n            _selection.each(function(_data){\n                chartWidth = width - margin.left - margin.right;\n                chartHeight = height - margin.top - margin.bottom;\n                data = _data;\n\n                buildColorScale();\n                buildSVG(this);\n                if (horizontal) {\n                    drawHorizontalLegend();\n                } else {\n                    drawVerticalLegend();\n                }\n            });\n        }\n\n        /**\n         * Depending on the size of the horizontal legend, we are going to either\n         * center the legend or add a new line with the last entry of the legend\n         * @return {void}\n         */\n        function adjustLines() {\n            let lineWidth = svg.select('.legend-line').node().getBoundingClientRect().width;\n            let lineWidthSpace = chartWidth - lineWidth;\n\n            if (lineWidthSpace > 0) {\n                centerLegendOnSVG();\n            } else {\n                splitInLines();\n            }\n        }\n\n        /**\n         * Builds containers for the legend\n         * Also applies the Margin convention\n         * @private\n         */\n        function buildContainerGroups() {\n            let container = svg\n              .append('g')\n                .classed('legend-container-group', true)\n                .attr('transform', `translate(${margin.left},${margin.top})`);\n\n            container\n              .append('g')\n                .classed('legend-group', true);\n        }\n\n        /**\n         * Builds color scale for chart, if any colorSchema was defined\n         * @private\n         */\n        function buildColorScale() {\n            if (colorSchema) {\n                colorScale = d3Scale.scaleOrdinal().range(colorSchema);\n            }\n        }\n\n        /**\n         * Builds the SVG element that will contain the chart\n         * @param  {HTMLElement} container DOM element that will work as the container of the graph\n         * @private\n         */\n        function buildSVG(container) {\n            if (!svg) {\n                svg = d3Selection.select(container)\n                  .append('svg')\n                    .classed('britechart britechart-legend', true);\n\n                buildContainerGroups();\n            }\n\n            svg\n                .attr('width', width)\n                .attr('height', height);\n        }\n\n        /**\n         * Centers the legend on the chart given that is a single line of labels\n         * @return {void}\n         */\n        function centerLegendOnSVG() {\n            let legendGroupSize = svg.select('g.legend-container-group').node().getBoundingClientRect().width;\n            let emptySpace = width - legendGroupSize;\n\n            if (emptySpace > 0) {\n                svg.select('g.legend-container-group')\n                    .attr('transform', `translate(${emptySpace/2},0)`)\n            }\n        }\n\n        /**\n         * Removes the faded class from all the entry lines\n         */\n        function cleanFadedLines() {\n            svg.select('.legend-group')\n                .selectAll('g.legend-entry')\n                .classed(isFadedClassName, false);\n        }\n\n        /**\n         * Draws the entries of the legend within a single line\n         * @private\n         */\n        function drawHorizontalLegend() {\n            let xOffset = markerSize;\n\n            // We want a single line\n            svg.select('.legend-group')\n              .append('g')\n                .classed('legend-line', true);\n\n            // And one entry per data item\n            entries = svg.select('.legend-line')\n              .selectAll('g.legend-entry')\n              .data(data);\n\n            // Enter\n            entries.enter()\n              .append('g')\n                .classed('legend-entry', true)\n                .attr('data-item', getId)\n                .attr('transform', function(d, i) {\n                    let horizontalOffset = xOffset,\n                        lineHeight = chartHeight / 2,\n                        verticalOffset = lineHeight,\n                        labelWidth = textHelper.getTextWidth(d.name, textSize);\n\n                    xOffset += markerSize + 2 * getLineElementMargin() + labelWidth;\n\n                    return `translate(${horizontalOffset},${verticalOffset})`;\n                })\n                .merge(entries)\n              .append('circle')\n                .classed('legend-circle', true)\n                .attr('cx', markerSize/2)\n                .attr('cy', markerYOffset)\n                .attr('r', markerSize / 2)\n                .style('fill', getCircleFill)\n                .style('stroke-width', 1);\n\n            svg.select('.legend-group')\n                .selectAll('g.legend-entry')\n              .append('text')\n                .classed('legend-entry-name', true)\n                .text(getName)\n                .attr('x', getLineElementMargin())\n                .style('font-size', `${textSize}px`)\n                .style('letter-spacing', `${textLetterSpacing}px`);\n\n            // Exit\n            svg.select('.legend-group')\n                .selectAll('g.legend-entry')\n                .exit()\n                .transition()\n                .style('opacity', 0)\n                .remove();\n\n            adjustLines();\n        }\n\n        /**\n         * Draws the entries of the legend\n         * @private\n         */\n        function drawVerticalLegend() {\n            entries = svg.select('.legend-group')\n                .selectAll('g.legend-line')\n                .data(data);\n\n            // Enter\n            entries.enter()\n              .append('g')\n                .classed('legend-line', true)\n                  .append('g')\n                    .classed('legend-entry', true)\n                    .attr('data-item', getId)\n                    .attr('transform', function(d, i) {\n                        let horizontalOffset = markerSize + getLineElementMargin(),\n                            lineHeight = chartHeight/ (data.length + 1),\n                            verticalOffset = (i + 1) * lineHeight;\n\n                        return `translate(${horizontalOffset},${verticalOffset})`;\n                    })\n                    .merge(entries)\n                  .append('circle')\n                    .classed('legend-circle', true)\n                    .attr('cx', markerSize/2)\n                    .attr('cy', markerYOffset)\n                    .attr('r', markerSize/2 )\n                    .style('fill', getCircleFill)\n                    .style('stroke-width', 1);\n\n            svg.select('.legend-group')\n                .selectAll('g.legend-line')\n                .selectAll('g.legend-entry')\n              .append('text')\n                .classed('legend-entry-name', true)\n                .text(getName)\n                .attr('x', getLineElementMargin())\n                .style('font-size', `${textSize}px`)\n                .style('letter-spacing', `${textLetterSpacing}px`);\n\n            svg.select('.legend-group')\n                .selectAll('g.legend-line')\n                .selectAll('g.legend-entry')\n              .append('text')\n                .classed('legend-entry-value', true)\n                .text(getFormattedQuantity)\n                .attr('x', chartWidth - valueReservedSpace)\n                .style('font-size', `${textSize}px`)\n                .style('letter-spacing', `${numberLetterSpacing}px`)\n                .style('text-anchor', 'end')\n                .style('startOffset', '100%');\n\n            // Exit\n            svg.select('.legend-group')\n                .selectAll('g.legend-line')\n                .exit()\n                .transition()\n                .style('opacity', 0)\n                .remove();\n        }\n\n        /**\n         * Applies the faded class to all lines but the one that has the given id\n         * @param  {number} exceptionItemId Id of the line that needs to stay the same\n         */\n        function fadeLinesBut(exceptionItemId) {\n            let classToFade = 'g.legend-entry';\n\n            svg.select('.legend-group')\n                .selectAll(classToFade)\n                .classed(isFadedClassName, true);\n\n            svg.select(`[data-item=\"${exceptionItemId}\"]`)\n                .classed(isFadedClassName, false);\n        }\n\n        /**\n         * Calculates the margin between elements of the legend\n         * @return {Number} Margin to apply between elements\n         */\n        function getLineElementMargin() {\n            return marginRatio * markerSize;\n        }\n\n        /**\n         * Simple method to move the last item of an overflowing legend into the next line\n         * @return {void}\n         * @private\n         */\n        function splitInLines() {\n            let legendEntries = svg.selectAll('.legend-entry');\n            let numberOfEntries = legendEntries.size();\n            let lineHeight = (chartHeight / 2) * 1.7;\n\n            let newLine = svg.select('.legend-group')\n              .append('g')\n                .classed('legend-line', true)\n                .attr('transform', `translate(0, ${lineHeight})`);\n\n            let lastEntry = legendEntries.filter(`:nth-child(${numberOfEntries})`);\n            lastEntry.attr('transform', `translate(${markerSize},0)`);\n            newLine.append(() => lastEntry.node());\n        }\n\n        /**\n         * Clears the highlighted line entry\n         */\n        exports.clearHighlight = function() {\n            cleanFadedLines();\n        };\n\n        /**\n         * Gets or Sets the colorSchema of the chart\n         * @param  {array} _x Color scheme array to get/set\n         * @return {number | module} Current colorSchema or Donut Chart module to chain calls\n         * @public\n         */\n        exports.colorSchema = function(_x) {\n            if (!arguments.length) {\n                return colorSchema;\n            }\n            colorSchema = _x;\n\n            return this;\n        };\n\n        /**\n         * Gets or Sets the height of the legend chart\n         * @param  {number} _x Desired width for the chart\n         * @return {height | module} Current height or Legend module to chain calls\n         * @public\n         */\n        exports.height = function(_x) {\n            if (!arguments.length) {\n                return height;\n            }\n            height = _x;\n\n            return this;\n        };\n\n        /**\n         * Highlights a line entry by fading the rest of lines\n         * @param  {number} entryId ID of the entry line\n         */\n        exports.highlight = function(entryId) {\n            cleanFadedLines();\n            fadeLinesBut(entryId);\n        };\n\n        /**\n         * Gets or Sets the horizontal mode on the legend\n         * @param  {boolean} _x Desired horizontal mode for the graph\n         * @return {horizontal | module} Current horizontal mode or Legend module to chain calls\n         * @public\n         */\n        exports.horizontal = function(_x) {\n            if (!arguments.length) {\n                return horizontal;\n            }\n            horizontal = _x;\n\n            return this;\n        };\n\n        /**\n         * Gets or Sets the margin of the legend chart\n         * @param  {object} _x Margin object to get/set\n         * @return {margin | module} Current margin or Legend module to chain calls\n         * @public\n         */\n        exports.margin = function(_x) {\n            if (!arguments.length) {\n                return margin;\n            }\n            margin = _x;\n\n            return this;\n        };\n\n        /**\n         * Gets or Sets the markerSize of the legend chart.\n         * This markerSize will determine the horizontal and vertical size of the colored marks\n         * added as color identifiers for the chart's categories.\n         *\n         * @param  {object} _x Margin object to get/set\n         * @return {markerSize | module} Current markerSize or Legend module to chain calls\n         * @public\n         */\n        exports.markerSize = function(_x) {\n            if (!arguments.length) {\n                return markerSize;\n            }\n            markerSize = _x;\n\n            return this;\n        };\n\n        /**\n         * Gets or Sets the width of the legend chart\n         * @param  {number} _x Desired width for the graph\n         * @return {width | module} Current width or Legend module to chain calls\n         * @public\n         */\n        exports.width = function(_x) {\n            if (!arguments.length) {\n                return width;\n            }\n            width = _x;\n\n            return this;\n        };\n\n        return exports;\n    };\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/charts/legend.js","define(function(require) {\n    'use strict';\n\n    var _ = require('underscore'),\n\n        jsonFivePlusOther = require('json!../json/donutDataFivePlusOther.json'),\n        jsonThreeCategories = require('json!../json/donutDataThreeCategories.json');\n\n\n    function DonutDataBuilder(config){\n        this.Klass = DonutDataBuilder;\n\n        this.config = _.defaults({}, config);\n\n        this.withFivePlusOther = function(){\n            var attributes = _.extend({}, this.config, jsonFivePlusOther);\n\n            return new this.Klass(attributes);\n        };\n\n        this.withThreeCategories = function() {\n            var attributes = _.extend({}, this.config, jsonThreeCategories);\n\n            return new this.Klass(attributes);\n        };\n\n        /**\n         * Sets the path for fetching the data\n         * @param  {String} path Desired path for test data\n         * @return {DonutDataBuilder}      Builder object\n         */\n        this.withPath = function(path){\n            var attributes = _.extend({}, this.config, {\n                jsonURL: path\n            });\n\n            return new this.Klass(attributes);\n        };\n\n        this.build = function() {\n            return this.config.data;\n        };\n    }\n\n    return {\n        DonutDataBuilder: DonutDataBuilder\n    };\n});\n\n\n\n// WEBPACK FOOTER //\n// ./test/fixtures/donutChartDataBuilder.js","module.exports = {\n\t\"data\": [\n\t\t{\n\t\t\t\"name\": \"Shiny\",\n\t\t\t\"id\": 1,\n\t\t\t\"quantity\": 86,\n\t\t\t\"percentage\": 5\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Blazing\",\n\t\t\t\"id\": 2,\n\t\t\t\"quantity\": 300,\n\t\t\t\"percentage\": 18\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Dazzling\",\n\t\t\t\"id\": 3,\n\t\t\t\"quantity\": 276,\n\t\t\t\"percentage\": 16\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Radiant\",\n\t\t\t\"id\": 4,\n\t\t\t\"quantity\": 195,\n\t\t\t\"percentage\": 11\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Sparkling\",\n\t\t\t\"id\": 5,\n\t\t\t\"quantity\": 36,\n\t\t\t\"percentage\": 2\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Other\",\n\t\t\t\"id\": 0,\n\t\t\t\"quantity\": 814,\n\t\t\t\"percentage\": 48\n\t\t}\n\t]\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.0.5.4@json-loader!./test/json/donutDataFivePlusOther.json\n// module id = 40\n// module chunks = 2","module.exports = {\n\t\"data\": [\n\t\t{\n\t\t\t\"name\": \"Shiny\",\n\t\t\t\"id\": 1,\n\t\t\t\"quantity\": 200,\n\t\t\t\"percentage\": 20\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Radiant\",\n\t\t\t\"id\": 2,\n\t\t\t\"quantity\": 200,\n\t\t\t\"percentage\": 20\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Sparkling\",\n\t\t\t\"id\": 3,\n\t\t\t\"quantity\": 600,\n\t\t\t\"percentage\": 60\n\t\t}\n\t]\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.0.5.4@json-loader!./test/json/donutDataThreeCategories.json\n// module id = 41\n// module chunks = 2","define(function(require) {\n\n    var d3Selection = require('d3-selection'),\n        colors = require('./../../src/charts/helpers/colors'),\n\n        selectClass = 'form-control';\n\n    /**\n     * Creates a color schema selector\n     * @param  {String}   selectContainerSelector   CSS DOM selector for the select box root\n     * @param  {String}   chartSelector             CSS DOM selector of the chart to render\n     * @param  {Function} callback                  Optional callback to execute after color change\n     * @return {void}\n     */\n    function createColorSelector(selectContainerSelector, chartSelector, callback) {\n        var colorKeys = Object.keys(colors.colorSchemas);\n        var containerSelector = document.querySelector(selectContainerSelector);\n\n        if (!containerSelector) { return; }\n\n        // Create Select\n        var sel = document.createElement(\"select\")\n            sel.className += ' ' + selectClass;\n\n        // And fill with options\n        colorKeys.forEach(function(key, i) {\n                var opt = document.createElement(\"option\");\n\n                opt.value = key;\n                opt.text = colors.colorSchemasHuman[key];\n                sel.add(opt);\n            });\n\n        // Add it to the DOM\n        containerSelector.append(sel);\n\n        // Listen for changes\n        d3Selection.select(sel)\n            .on('change', function() {\n                // Get new color schema\n                var newSchema = colors.colorSchemas[this.value];\n\n                d3Selection.select(chartSelector).remove();\n\n                // Draw\n                if (callback) {\n                    callback(newSchema);\n                }\n            });\n    }\n\n    return {\n        createColorSelector: createColorSelector\n    };\n});\n\n\n\n// WEBPACK FOOTER //\n// ./demos/helpers/colorSelector.js"],"sourceRoot":""}